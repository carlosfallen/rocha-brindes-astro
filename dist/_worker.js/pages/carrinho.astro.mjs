globalThis.process ??= {}; globalThis.process.env ??= {};
import { c as createComponent, r as renderComponent, a as renderTemplate, m as maybeRenderHead } from '../chunks/astro/server_DMHZTcBm.mjs';
import { $ as $$Layout } from '../chunks/Layout_DP87oAng.mjs';
export { r as renderers } from '../chunks/_@astro-renderers_Cevu3oIO.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Carrinho = createComponent(async ($$result, $$props, $$slots) => {
  const title = "Seu Or\xE7amento";
  return renderTemplate`${renderComponent($$result, "Layout", $$Layout, { "title": title }, { "default": async ($$result2) => renderTemplate(_a || (_a = __template([" ", '<section class="container mx-auto px-4 py-12" id="cart-root"> <h1 class="text-3xl font-title font-bold text-dark mb-10">Seu Or\xE7amento</h1> <!-- Carregando --> <div id="cart-loading" class="text-center py-20 text-gray-500 text-lg">\nCarregando itens do carrinho...\n</div> <!-- Carrinho preenchido --> <div id="cart-content" class="hidden"> <div id="cart-items" class="space-y-6"></div> <div class="mt-10 p-6 bg-white rounded-xl shadow-card border"> <h2 class="text-xl font-bold mb-4">Resumo</h2> <p class="text-gray-700 mb-3">\nTotal de itens: <span id="total-qty" class="font-semibold"></span> </p> <div class="flex flex-col sm:flex-row gap-3"> <button id="whatsapp-btn" class="flex-1 bg-primary text-white font-bold py-3 rounded-xl hover:opacity-90 transition">\nEnviar Pedido pelo WhatsApp\n</button> <a href="/checkout" class="flex-1 inline-flex items-center justify-center border border-primary text-primary font-bold py-3 rounded-xl hover:bg-primary/5 transition">\nFinalizar Or\xE7amento\n</a> </div> </div> </div> <!-- Carrinho vazio --> <div id="cart-empty" class="hidden text-center py-20"> <p class="text-xl text-gray-500 mb-6">Seu carrinho est\xE1 vazio.</p> <a href="/produtos" class="inline-block px-6 py-3 bg-primary text-white rounded-lg font-semibold">\nVer produtos\n</a> </div> </section> <script>\n  async function loadCart() {\n    const loading = document.getElementById("cart-loading")\n    const content = document.getElementById("cart-content")\n    const empty = document.getElementById("cart-empty")\n    const itemsRoot = document.getElementById("cart-items")\n    const totalQtyEl = document.getElementById("total-qty")\n\n    const cart = JSON.parse(localStorage.getItem("cart") || "[]")\n\n    if (cart.length === 0) {\n      loading.classList.add("hidden")\n      empty.classList.remove("hidden")\n      return\n    }\n\n    // Buscar detalhes dos produtos via API\n    const res = await fetch("/api/cart/info", {\n      method: "POST",\n      body: JSON.stringify(cart),\n      headers: { "Content-Type": "application/json" }\n    })\n\n    const data = await res.json()\n\n    loading.classList.add("hidden")\n    content.classList.remove("hidden")\n\n    let totalQty = 0\n    itemsRoot.innerHTML = ""\n\n    data.items.forEach(item => {\n      totalQty += item.qty\n\n      const el = document.createElement("div")\n      el.className = "p-4 bg-white rounded-xl shadow-card border flex gap-6"\n\n      el.innerHTML = `\n        <img src="${item.thumb_url || item.imagem_url}" class="w-24 h-24 object-cover rounded-lg" />\n\n        <div class="flex-1">\n          <h3 class="text-lg font-bold">${item.nome}</h3>\n          <p class="text-sm text-gray-500">SKU: ${item.id}</p>\n          ${item.cor ? `<p class="text-sm mt-1">Cor: <strong>${item.cor}</strong></p>` : ""}\n          \n          <div class="mt-4 flex items-center gap-3">\n            <button class="qtyminus px-3 py-1 bg-gray-100 rounded" data-id="${item.id}" data-cor="${item.cor}">-</button>\n            <span class="font-semibold">${item.qty}</span>\n            <button class="qtyplus px-3 py-1 bg-gray-100 rounded" data-id="${item.id}" data-cor="${item.cor}">+</button>\n\n            <button class="remove ml-auto text-red-500 text-sm font-semibold" data-id="${item.id}" data-cor="${item.cor}">\n              Remover\n            </button>\n          </div>\n        </div>\n      `\n\n      itemsRoot.appendChild(el)\n    })\n\n    totalQtyEl.textContent = totalQty\n\n    // Eventos: aumentar, diminuir, remover\n    document.querySelectorAll(".qtyplus").forEach(btn => {\n      btn.onclick = () => updateQty(btn.dataset.id, btn.dataset.cor, +1)\n    })\n    document.querySelectorAll(".qtyminus").forEach(btn => {\n      btn.onclick = () => updateQty(btn.dataset.id, btn.dataset.cor, -1)\n    })\n    document.querySelectorAll(".remove").forEach(btn => {\n      btn.onclick = () => removeItem(btn.dataset.id, btn.dataset.cor)\n    })\n\n    // WhatsApp\n    document.getElementById("whatsapp-btn").onclick = () => sendToWhatsApp(data.items)\n  }\n\n  function updateQty(id, cor, delta) {\n    const cart = JSON.parse(localStorage.getItem("cart") || "[]")\n\n    const item = cart.find(p => p.id === id && p.cor === cor)\n    if (!item) return\n\n    item.qty = Math.max(1, item.qty + delta)\n    localStorage.setItem("cart", JSON.stringify(cart))\n    location.reload()\n  }\n\n  function removeItem(id, cor) {\n    let cart = JSON.parse(localStorage.getItem("cart") || "[]")\n    cart = cart.filter(p => !(p.id === id && p.cor === cor))\n    localStorage.setItem("cart", JSON.stringify(cart))\n    location.reload()\n  }\n\n  function sendToWhatsApp(items) {\n    const text = items.map(item =>\n      `\u2022 *${item.nome}* (SKU: ${item.id})\\n  Quantidade: ${item.qty}\\n  Cor: ${item.cor || "-"}`\n    ).join("\\n\\n")\n\n    const phone = "5599999999999" // <-- Substitua pelo seu n\xFAmero\n    const url = `https://wa.me/${phone}?text=${encodeURIComponent(text)}`\n    window.open(url)\n  }\n\n  loadCart()\n<\/script> '], [" ", '<section class="container mx-auto px-4 py-12" id="cart-root"> <h1 class="text-3xl font-title font-bold text-dark mb-10">Seu Or\xE7amento</h1> <!-- Carregando --> <div id="cart-loading" class="text-center py-20 text-gray-500 text-lg">\nCarregando itens do carrinho...\n</div> <!-- Carrinho preenchido --> <div id="cart-content" class="hidden"> <div id="cart-items" class="space-y-6"></div> <div class="mt-10 p-6 bg-white rounded-xl shadow-card border"> <h2 class="text-xl font-bold mb-4">Resumo</h2> <p class="text-gray-700 mb-3">\nTotal de itens: <span id="total-qty" class="font-semibold"></span> </p> <div class="flex flex-col sm:flex-row gap-3"> <button id="whatsapp-btn" class="flex-1 bg-primary text-white font-bold py-3 rounded-xl hover:opacity-90 transition">\nEnviar Pedido pelo WhatsApp\n</button> <a href="/checkout" class="flex-1 inline-flex items-center justify-center border border-primary text-primary font-bold py-3 rounded-xl hover:bg-primary/5 transition">\nFinalizar Or\xE7amento\n</a> </div> </div> </div> <!-- Carrinho vazio --> <div id="cart-empty" class="hidden text-center py-20"> <p class="text-xl text-gray-500 mb-6">Seu carrinho est\xE1 vazio.</p> <a href="/produtos" class="inline-block px-6 py-3 bg-primary text-white rounded-lg font-semibold">\nVer produtos\n</a> </div> </section> <script>\n  async function loadCart() {\n    const loading = document.getElementById("cart-loading")\n    const content = document.getElementById("cart-content")\n    const empty = document.getElementById("cart-empty")\n    const itemsRoot = document.getElementById("cart-items")\n    const totalQtyEl = document.getElementById("total-qty")\n\n    const cart = JSON.parse(localStorage.getItem("cart") || "[]")\n\n    if (cart.length === 0) {\n      loading.classList.add("hidden")\n      empty.classList.remove("hidden")\n      return\n    }\n\n    // Buscar detalhes dos produtos via API\n    const res = await fetch("/api/cart/info", {\n      method: "POST",\n      body: JSON.stringify(cart),\n      headers: { "Content-Type": "application/json" }\n    })\n\n    const data = await res.json()\n\n    loading.classList.add("hidden")\n    content.classList.remove("hidden")\n\n    let totalQty = 0\n    itemsRoot.innerHTML = ""\n\n    data.items.forEach(item => {\n      totalQty += item.qty\n\n      const el = document.createElement("div")\n      el.className = "p-4 bg-white rounded-xl shadow-card border flex gap-6"\n\n      el.innerHTML = \\`\n        <img src="\\${item.thumb_url || item.imagem_url}" class="w-24 h-24 object-cover rounded-lg" />\n\n        <div class="flex-1">\n          <h3 class="text-lg font-bold">\\${item.nome}</h3>\n          <p class="text-sm text-gray-500">SKU: \\${item.id}</p>\n          \\${item.cor ? \\`<p class="text-sm mt-1">Cor: <strong>\\${item.cor}</strong></p>\\` : ""}\n          \n          <div class="mt-4 flex items-center gap-3">\n            <button class="qtyminus px-3 py-1 bg-gray-100 rounded" data-id="\\${item.id}" data-cor="\\${item.cor}">-</button>\n            <span class="font-semibold">\\${item.qty}</span>\n            <button class="qtyplus px-3 py-1 bg-gray-100 rounded" data-id="\\${item.id}" data-cor="\\${item.cor}">+</button>\n\n            <button class="remove ml-auto text-red-500 text-sm font-semibold" data-id="\\${item.id}" data-cor="\\${item.cor}">\n              Remover\n            </button>\n          </div>\n        </div>\n      \\`\n\n      itemsRoot.appendChild(el)\n    })\n\n    totalQtyEl.textContent = totalQty\n\n    // Eventos: aumentar, diminuir, remover\n    document.querySelectorAll(".qtyplus").forEach(btn => {\n      btn.onclick = () => updateQty(btn.dataset.id, btn.dataset.cor, +1)\n    })\n    document.querySelectorAll(".qtyminus").forEach(btn => {\n      btn.onclick = () => updateQty(btn.dataset.id, btn.dataset.cor, -1)\n    })\n    document.querySelectorAll(".remove").forEach(btn => {\n      btn.onclick = () => removeItem(btn.dataset.id, btn.dataset.cor)\n    })\n\n    // WhatsApp\n    document.getElementById("whatsapp-btn").onclick = () => sendToWhatsApp(data.items)\n  }\n\n  function updateQty(id, cor, delta) {\n    const cart = JSON.parse(localStorage.getItem("cart") || "[]")\n\n    const item = cart.find(p => p.id === id && p.cor === cor)\n    if (!item) return\n\n    item.qty = Math.max(1, item.qty + delta)\n    localStorage.setItem("cart", JSON.stringify(cart))\n    location.reload()\n  }\n\n  function removeItem(id, cor) {\n    let cart = JSON.parse(localStorage.getItem("cart") || "[]")\n    cart = cart.filter(p => !(p.id === id && p.cor === cor))\n    localStorage.setItem("cart", JSON.stringify(cart))\n    location.reload()\n  }\n\n  function sendToWhatsApp(items) {\n    const text = items.map(item =>\n      \\`\u2022 *\\${item.nome}* (SKU: \\${item.id})\\\\n  Quantidade: \\${item.qty}\\\\n  Cor: \\${item.cor || "-"}\\`\n    ).join("\\\\n\\\\n")\n\n    const phone = "5599999999999" // <-- Substitua pelo seu n\xFAmero\n    const url = \\`https://wa.me/\\${phone}?text=\\${encodeURIComponent(text)}\\`\n    window.open(url)\n  }\n\n  loadCart()\n<\/script> '])), maybeRenderHead()) })}`;
}, "/home/user/rocha-brindes-astro/src/pages/carrinho.astro", void 0);

const $$file = "/home/user/rocha-brindes-astro/src/pages/carrinho.astro";
const $$url = "/carrinho";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$Carrinho,
  file: $$file,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
