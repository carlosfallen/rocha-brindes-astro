globalThis.process ??= {}; globalThis.process.env ??= {};
import { c as createComponent, r as renderComponent, a as renderTemplate, b as addAttribute, m as maybeRenderHead } from '../chunks/astro/server_DMHZTcBm.mjs';
import { $ as $$Layout } from '../chunks/Layout_DP87oAng.mjs';
export { r as renderers } from '../chunks/_@astro-renderers_Cevu3oIO.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Checkout = createComponent(async ($$result, $$props, $$slots) => {
  const title = "Finalizar Or\xE7amento";
  return renderTemplate`${renderComponent($$result, "Layout", $$Layout, { "title": title }, { "default": async ($$result2) => renderTemplate(_a || (_a = __template([" ", '<section class="container mx-auto px-4 py-12" id="checkout-root"> <h1 class="text-3xl font-title font-bold text-dark mb-2">\nFinalizar Or\xE7amento\n</h1> <p class="text-gray-600 mb-8">\nPreencha seus dados para enviarmos seu pedido com os produtos selecionados.\n</p> <div class="grid lg:grid-cols-[2fr_3fr] gap-10"> <!-- Dados do cliente --> <div class="bg-white rounded-2xl shadow-card border p-6"> <h2 class="text-xl font-bold mb-4">Seus dados</h2> <form id="checkout-form" class="space-y-4"> <div> <label class="block text-sm font-semibold text-gray-700 mb-1">\nNome completo\n</label> <input type="text" name="name" required class="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Seu nome"> </div> <div> <label class="block text-sm font-semibold text-gray-700 mb-1">\nEmpresa (opcional)\n</label> <input type="text" name="company" class="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Nome da empresa"> </div> <div class="grid sm:grid-cols-2 gap-4"> <div> <label class="block text-sm font-semibold text-gray-700 mb-1">\nE-mail\n</label> <input type="email" name="email" required class="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="seu@email.com"> </div> <div> <label class="block text-sm font-semibold text-gray-700 mb-1">\nWhatsApp\n</label> <input type="tel" name="phone" required class="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="(00) 00000-0000"> </div> </div> <div> <label class="block text-sm font-semibold text-gray-700 mb-1">\nObserva\xE7\xF5es adicionais\n</label> <textarea name="notes"', ' class="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Fale sobre quantidade por cor, prazos, personaliza\xE7\xE3o, etc."></textarea> </div> <button type="submit" class="w-full mt-4 bg-primary text-white font-bold py-3 rounded-xl hover:opacity-90 transition">\nEnviar pedido pelo WhatsApp\n</button> </form> </div> <!-- Resumo do pedido --> <div class="bg-white rounded-2xl shadow-card border p-6"> <h2 class="text-xl font-bold mb-4">Resumo do Pedido</h2> <div id="summary-loading" class="text-gray-500 py-10 text-center">\nCarregando produtos do carrinho...\n</div> <div id="summary-empty" class="hidden text-center py-10"> <p class="text-gray-500 mb-4">\nN\xE3o h\xE1 itens no seu carrinho.\n</p> <a href="/produtos" class="inline-flex items-center justify-center px-6 py-3 bg-primary text-white rounded-xl font-semibold">\nVer produtos\n</a> </div> <div id="summary-content" class="hidden"> <div id="summary-items" class="space-y-4 mb-6"></div> <p class="text-gray-700">\nTotal de itens: <span id="summary-total-qty" class="font-semibold"></span> </p> </div> </div> </div> </section> <script>\n    async function loadSummary() {\n      const loading = document.getElementById("summary-loading")\n      const empty = document.getElementById("summary-empty")\n      const content = document.getElementById("summary-content")\n      const itemsRoot = document.getElementById("summary-items")\n      const totalQtyEl = document.getElementById("summary-total-qty")\n\n      const cart = JSON.parse(localStorage.getItem("cart") || "[]")\n\n      if (!cart.length) {\n        loading.classList.add("hidden")\n        empty.classList.remove("hidden")\n        return\n      }\n\n      const res = await fetch("/api/cart/info", {\n        method: "POST",\n        body: JSON.stringify(cart),\n        headers: { "Content-Type": "application/json" }\n      })\n\n      const data = await res.json()\n\n      loading.classList.add("hidden")\n      content.classList.remove("hidden")\n\n      let totalQty = 0\n      itemsRoot.innerHTML = ""\n\n      data.items.forEach(item => {\n        totalQty += item.qty\n\n        const el = document.createElement("div")\n        el.className = "flex gap-4"\n\n        el.innerHTML = `\n          <img src="${item.thumb_url || item.imagem_url}" class="w-16 h-16 object-cover rounded-lg border" />\n          <div>\n            <p class="text-sm font-semibold text-dark">${item.nome}</p>\n            <p class="text-xs text-gray-500">SKU: ${item.id}</p>\n            <p class="text-xs text-gray-500">\n              Quantidade: <strong>${item.qty}</strong>${item.cor ? " \u2022 Cor: <strong>" + item.cor + "</strong>" : ""}\n            </p>\n          </div>\n        `\n\n        itemsRoot.appendChild(el)\n      })\n\n      totalQtyEl.textContent = totalQty\n\n      // salvar na window para uso no submit\n      window.__CHECKOUT_ITEMS__ = data.items\n    }\n\n    function setupForm() {\n      const form = document.getElementById("checkout-form")\n\n      form.addEventListener("submit", (e) => {\n        e.preventDefault()\n\n        const fd = new FormData(form)\n        const name = fd.get("name")\n        const company = fd.get("company")\n        const email = fd.get("email")\n        const phone = fd.get("phone")\n        const notes = fd.get("notes")\n\n        const items = window.__CHECKOUT_ITEMS__ || []\n\n        if (!items.length) {\n          alert("Seu carrinho est\xE1 vazio.")\n          return\n        }\n\n        const intro = [\n          `*Novo pedido de or\xE7amento*`,\n          ``,\n          `*Nome:* ${name}`,\n          company ? `*Empresa:* ${company}` : null,\n          `*E-mail:* ${email}`,\n          `*WhatsApp:* ${phone}`,\n        ].filter(Boolean).join("\\n")\n\n        const productsText = items.map(item =>\n          `\u2022 *${item.nome}* (SKU: ${item.id})\\n  Quantidade: ${item.qty}\\n  Cor: ${item.cor || "-"}`\n        ).join("\\n\\n")\n\n        const notesText = notes ? `\\n\\n*Observa\xE7\xF5es:*\\n${notes}` : ""\n\n        const message = `${intro}\\n\\n*Produtos:*\\n\\n${productsText}${notesText}`\n\n        const phoneDest = "5599999999999" // coloque aqui o n\xFAmero de destino\n        const url = \\`https://wa.me/\\${phoneDest}?text=\\${encodeURIComponent(message)}\\`\n\n        window.open(url, "_blank")\n      })\n    }\n\n    loadSummary()\n    setupForm()\n  <\/script> '], [" ", '<section class="container mx-auto px-4 py-12" id="checkout-root"> <h1 class="text-3xl font-title font-bold text-dark mb-2">\nFinalizar Or\xE7amento\n</h1> <p class="text-gray-600 mb-8">\nPreencha seus dados para enviarmos seu pedido com os produtos selecionados.\n</p> <div class="grid lg:grid-cols-[2fr_3fr] gap-10"> <!-- Dados do cliente --> <div class="bg-white rounded-2xl shadow-card border p-6"> <h2 class="text-xl font-bold mb-4">Seus dados</h2> <form id="checkout-form" class="space-y-4"> <div> <label class="block text-sm font-semibold text-gray-700 mb-1">\nNome completo\n</label> <input type="text" name="name" required class="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Seu nome"> </div> <div> <label class="block text-sm font-semibold text-gray-700 mb-1">\nEmpresa (opcional)\n</label> <input type="text" name="company" class="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Nome da empresa"> </div> <div class="grid sm:grid-cols-2 gap-4"> <div> <label class="block text-sm font-semibold text-gray-700 mb-1">\nE-mail\n</label> <input type="email" name="email" required class="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="seu@email.com"> </div> <div> <label class="block text-sm font-semibold text-gray-700 mb-1">\nWhatsApp\n</label> <input type="tel" name="phone" required class="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="(00) 00000-0000"> </div> </div> <div> <label class="block text-sm font-semibold text-gray-700 mb-1">\nObserva\xE7\xF5es adicionais\n</label> <textarea name="notes"', ' class="w-full px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Fale sobre quantidade por cor, prazos, personaliza\xE7\xE3o, etc."></textarea> </div> <button type="submit" class="w-full mt-4 bg-primary text-white font-bold py-3 rounded-xl hover:opacity-90 transition">\nEnviar pedido pelo WhatsApp\n</button> </form> </div> <!-- Resumo do pedido --> <div class="bg-white rounded-2xl shadow-card border p-6"> <h2 class="text-xl font-bold mb-4">Resumo do Pedido</h2> <div id="summary-loading" class="text-gray-500 py-10 text-center">\nCarregando produtos do carrinho...\n</div> <div id="summary-empty" class="hidden text-center py-10"> <p class="text-gray-500 mb-4">\nN\xE3o h\xE1 itens no seu carrinho.\n</p> <a href="/produtos" class="inline-flex items-center justify-center px-6 py-3 bg-primary text-white rounded-xl font-semibold">\nVer produtos\n</a> </div> <div id="summary-content" class="hidden"> <div id="summary-items" class="space-y-4 mb-6"></div> <p class="text-gray-700">\nTotal de itens: <span id="summary-total-qty" class="font-semibold"></span> </p> </div> </div> </div> </section> <script>\n    async function loadSummary() {\n      const loading = document.getElementById("summary-loading")\n      const empty = document.getElementById("summary-empty")\n      const content = document.getElementById("summary-content")\n      const itemsRoot = document.getElementById("summary-items")\n      const totalQtyEl = document.getElementById("summary-total-qty")\n\n      const cart = JSON.parse(localStorage.getItem("cart") || "[]")\n\n      if (!cart.length) {\n        loading.classList.add("hidden")\n        empty.classList.remove("hidden")\n        return\n      }\n\n      const res = await fetch("/api/cart/info", {\n        method: "POST",\n        body: JSON.stringify(cart),\n        headers: { "Content-Type": "application/json" }\n      })\n\n      const data = await res.json()\n\n      loading.classList.add("hidden")\n      content.classList.remove("hidden")\n\n      let totalQty = 0\n      itemsRoot.innerHTML = ""\n\n      data.items.forEach(item => {\n        totalQty += item.qty\n\n        const el = document.createElement("div")\n        el.className = "flex gap-4"\n\n        el.innerHTML = \\`\n          <img src="\\${item.thumb_url || item.imagem_url}" class="w-16 h-16 object-cover rounded-lg border" />\n          <div>\n            <p class="text-sm font-semibold text-dark">\\${item.nome}</p>\n            <p class="text-xs text-gray-500">SKU: \\${item.id}</p>\n            <p class="text-xs text-gray-500">\n              Quantidade: <strong>\\${item.qty}</strong>\\${item.cor ? " \u2022 Cor: <strong>" + item.cor + "</strong>" : ""}\n            </p>\n          </div>\n        \\`\n\n        itemsRoot.appendChild(el)\n      })\n\n      totalQtyEl.textContent = totalQty\n\n      // salvar na window para uso no submit\n      window.__CHECKOUT_ITEMS__ = data.items\n    }\n\n    function setupForm() {\n      const form = document.getElementById("checkout-form")\n\n      form.addEventListener("submit", (e) => {\n        e.preventDefault()\n\n        const fd = new FormData(form)\n        const name = fd.get("name")\n        const company = fd.get("company")\n        const email = fd.get("email")\n        const phone = fd.get("phone")\n        const notes = fd.get("notes")\n\n        const items = window.__CHECKOUT_ITEMS__ || []\n\n        if (!items.length) {\n          alert("Seu carrinho est\xE1 vazio.")\n          return\n        }\n\n        const intro = [\n          \\`*Novo pedido de or\xE7amento*\\`,\n          \\`\\`,\n          \\`*Nome:* \\${name}\\`,\n          company ? \\`*Empresa:* \\${company}\\` : null,\n          \\`*E-mail:* \\${email}\\`,\n          \\`*WhatsApp:* \\${phone}\\`,\n        ].filter(Boolean).join("\\\\n")\n\n        const productsText = items.map(item =>\n          \\`\u2022 *\\${item.nome}* (SKU: \\${item.id})\\\\n  Quantidade: \\${item.qty}\\\\n  Cor: \\${item.cor || "-"}\\`\n        ).join("\\\\n\\\\n")\n\n        const notesText = notes ? \\`\\\\n\\\\n*Observa\xE7\xF5es:*\\\\n\\${notes}\\` : ""\n\n        const message = \\`\\${intro}\\\\n\\\\n*Produtos:*\\\\n\\\\n\\${productsText}\\${notesText}\\`\n\n        const phoneDest = "5599999999999" // coloque aqui o n\xFAmero de destino\n        const url = \\\\\\`https://wa.me/\\\\\\${phoneDest}?text=\\\\\\${encodeURIComponent(message)}\\\\\\`\n\n        window.open(url, "_blank")\n      })\n    }\n\n    loadSummary()\n    setupForm()\n  <\/script> '])), maybeRenderHead(), addAttribute(4, "rows")) })}`;
}, "/home/user/rocha-brindes-astro/src/pages/checkout.astro", void 0);

const $$file = "/home/user/rocha-brindes-astro/src/pages/checkout.astro";
const $$url = "/checkout";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$Checkout,
  file: $$file,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
