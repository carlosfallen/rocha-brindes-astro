const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/CategorySidebar.vIEIdv_e.js","_astro/Providers.CRVvNzA1.js","_astro/index.Ba-IbuDT.js","_astro/image.BQBxtT52.js","_astro/x.CFcOJ7yb.js","_astro/search.BS1YYD3w.js","_astro/ProductGrid.CR-kOx3M.js","_astro/ProductCard.BdWQZ_9O.js","_astro/Layout.XsYLrdgn.js","_astro/CartSidebar.9n7HvQtb.js","_astro/plus.BgIDMlwU.js","_astro/trash-2.CpRjj1kt.js","_astro/send.DnnTTjtC.js"])))=>i.map(i=>d[i]);
import{_ as u}from"./preload-helper.CLcXU_4U.js";import{j as e,P as _}from"./Providers.CRVvNzA1.js";import{r as a}from"./index.Ba-IbuDT.js";import{u as P,a as E,L}from"./Layout.XsYLrdgn.js";import{C as S,a as k}from"./chevron-right.D91g5HDC.js";import"./image.BQBxtT52.js";const z=a.lazy(()=>u(()=>import("./CategorySidebar.vIEIdv_e.js"),__vite__mapDeps([0,1,2,3,4,5]))),M=a.lazy(()=>u(()=>import("./ProductGrid.CR-kOx3M.js"),__vite__mapDeps([6,1,2,7,3,8]))),T=a.lazy(()=>u(()=>import("./CartSidebar.9n7HvQtb.js"),__vite__mapDeps([9,1,2,8,3,4,10,11,12])));function A(){const{data:x,isLoading:y}=P(1e3),{category:m,search:i,setCategory:v,setSearch:b}=E(),[t,f]=a.useState(0),d=12;a.useEffect(()=>{f(0),window.scrollTo({top:0,behavior:"smooth"})},[m,i]);const o=a.useMemo(()=>x?x.products.filter(r=>{const s=m==="Todos"||r.categorias?.includes(m),h=!i||r.nome.toLowerCase().includes(i.toLowerCase())||r.id.toLowerCase().includes(i.toLowerCase());return s&&h}):[],[x,m,i]),N=a.useMemo(()=>{const r=t*d;return o.slice(r,r+d)},[o,t,d]),n=Math.ceil(o.length/d),g=r=>{f(r),window.scrollTo({top:0,behavior:"smooth"})},j=e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(12)].map((r,s)=>e.jsx("div",{className:"bg-white rounded-xl h-96 animate-pulse"},s))}),w=()=>{if(n<=1)return null;const r=()=>{const s=[],h=t>2,c=t<n-3;if(n<=7)for(let l=0;l<n;l++)s.push(l);else{s.push(0),h&&s.push("...");const l=Math.max(1,t-1),C=Math.min(n-2,t+1);for(let p=l;p<=C;p++)s.includes(p)||s.push(p);c&&s.push("..."),s.includes(n-1)||s.push(n-1)}return s};return e.jsxs("div",{className:"mt-12 flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>g(t-1),disabled:t===0,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-sm",children:[e.jsx(S,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),e.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:r().map((s,h)=>{if(s==="...")return e.jsx("span",{className:"px-2 py-2 text-gray-400",children:"..."},`ellipsis-${h}`);const c=s,l=c===t;return e.jsx("button",{onClick:()=>g(c),className:`min-w-[40px] h-[40px] px-3 py-2 rounded-lg font-semibold text-sm transition-all ${l?"bg-primary text-white shadow-md scale-110":"bg-white border-2 border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-primary"}`,children:c+1},c)})}),e.jsxs("button",{onClick:()=>g(t+1),disabled:t>=n-1,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:"Próxima"}),e.jsx(k,{size:18})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 font-medium",children:["Página ",e.jsx("span",{className:"font-bold text-primary",children:t+1})," de"," ",e.jsx("span",{className:"font-bold",children:n}),e.jsxs("span",{className:"hidden sm:inline",children:[" • ",o.length," ",o.length===1?"produto":"produtos"]})]})]})};return e.jsxs(L,{children:[e.jsx("div",{className:"bg-gray-50 min-h-screen pt-8 pb-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"font-title font-bold text-3xl md:text-4xl text-dark mb-2",children:"Catálogo de Produtos"}),e.jsx("p",{className:"text-gray-600",children:"Explore nossa linha completa de brindes personalizados"})]}),e.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-8",children:[e.jsx(a.Suspense,{fallback:null,children:e.jsx(z,{categories:x?.categories.map(r=>r.nome)||[],selected:m,onSelect:v,search:i,onSearch:b})}),e.jsx("div",{children:y?j:o.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("p",{className:"text-xl text-gray-500",children:"Nenhum produto encontrado"}),i&&e.jsx("button",{onClick:()=>b(""),className:"mt-4 px-6 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-all",children:"Limpar busca"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-semibold",children:t*d+1})," -"," ",e.jsx("span",{className:"font-semibold",children:Math.min((t+1)*d,o.length)})," de"," ",e.jsx("span",{className:"font-semibold",children:o.length})," ",o.length===1?"produto":"produtos"]})}),e.jsx(a.Suspense,{fallback:j,children:e.jsx(M,{products:N,linkToPage:!0})}),w()]})})]})]})}),e.jsx(a.Suspense,{fallback:null,children:e.jsx(T,{})})]})}function F(){return e.jsx(_,{children:e.jsx(A,{})})}export{F as default};
