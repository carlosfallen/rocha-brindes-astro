import{g as w,d as j,b as N,j as e}from"./Providers.CRVvNzA1.js";import{r as m}from"./index.Ba-IbuDT.js";import{a as v,S as C}from"./Layout.XsYLrdgn.js";import{o as k}from"./image.BQBxtT52.js";import{X as $}from"./x.CFcOJ7yb.js";import{M as z,P as S}from"./plus.BgIDMlwU.js";import{T as E}from"./trash-2.CpRjj1kt.js";import{S as q}from"./send.DnnTTjtC.js";function U(){const{items:l,isOpen:i,toggle:d,remove:h,clear:p,updateQuantity:c}=v(),[f,g]=m.useState("5589994333316"),[t,n]=m.useState({name:"",doc:"",address:"",cep:"",obs:""});m.useEffect(()=>{b()},[]),m.useEffect(()=>(i?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[i]);const b=async()=>{try{const s=await w(j(N,"config","general"));if(s.exists()){const r=s.data();r.whatsappNumber&&g(r.whatsappNumber)}}catch(s){console.error("Erro ao carregar Contato:",s)}},x=l.reduce((s,r)=>s+r.quantity,0),y=s=>{s.preventDefault();let r=`*Orçamento - Rocha Brindes*

`;r+=`*Cliente:* ${t.name}
`,r+=`*Contato:* ${t.doc}
`,r+=`*Endereço:* ${t.address}
`,r+=`*CEP:* ${t.cep}

`,r+=`*Produtos:*
`,l.forEach(a=>{r+=`• ${a.nome} (Cód: ${a.id})`,a.cor&&(r+=` - Cor: ${a.cor}`),r+=` - Qtd: ${a.quantity}
`}),t.obs&&(r+=`
*Observações:* ${t.obs}`);const o=`https://wa.me/${f.replace(/\D/g,"")}?text=${encodeURIComponent(r.trim())}`;/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=o:window.open(o,"_blank"),p(),d(),n({name:"",doc:"",address:"",cep:"",obs:""})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 bg-dark/60 backdrop-blur-sm z-50 transition-opacity duration-300 ${i?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:d}),e.jsx("aside",{className:`fixed top-0 right-0 h-full w-full sm:max-w-md md:max-w-lg bg-white z-50 shadow-2xl transform transition-transform duration-300 ${i?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b bg-primary flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-title font-bold text-white",children:"Carrinho"}),x>0&&e.jsxs("p",{className:"text-white/80 text-xs sm:text-sm mt-1",children:[x," ",x===1?"item":"itens"]})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-white/20 rounded-full transition-all duration-200",children:e.jsx($,{size:24,className:"text-white"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-4 bg-light",children:l.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:e.jsx(C,{size:32,className:"sm:w-10 sm:h-10 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium text-sm sm:text-base",children:"Nenhum produto adicionado"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-2",children:"Adicione produtos para solicitar um orçamento"})]}):e.jsxs(e.Fragment,{children:[l.map(s=>{let r=s.thumb_url||s.imagem_url;if(s.cor&&s.variacoes?.length){const o=s.variacoes.find(a=>a.cor===s.cor);o&&(r=o.thumb_url||o.imagem_url||r)}!r&&s.variacoes?.[0]&&(r=s.variacoes[0].thumb_url||s.variacoes[0].imagem_url);const u=r?k(r,"thumbnail"):"";return e.jsxs("div",{className:"flex gap-3 sm:gap-4 bg-white p-3 sm:p-4 rounded-xl shadow-card hover:shadow-card-hover transition-all duration-200",children:[u?e.jsx("img",{src:u,alt:s.nome,className:"w-16 h-16 sm:w-20 sm:h-20 object-contain rounded-lg bg-gray-50 flex-shrink-0",loading:"lazy"}):e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 flex items-center justify-center bg-gray-100 rounded-lg flex-shrink-0",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Sem img"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-xs sm:text-sm line-clamp-2 text-dark mb-1 break-words",children:s.nome}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-gray-500 mb-2",children:["Cód: ",s.id]}),s.cor&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-[10px] sm:text-xs text-gray-600",children:"Cor:"}),e.jsx("span",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 sm:py-1 bg-gray-100 rounded-md",children:e.jsx("span",{className:"text-[10px] sm:text-xs font-medium text-gray-700",children:s.cor})})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx("button",{onClick:()=>c(s.id,Math.max(1,s.quantity-1)),className:"p-1 sm:p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(z,{size:12,className:"sm:w-3.5 sm:h-3.5 text-gray-600"})}),e.jsx("input",{type:"number",min:"1",value:s.quantity,onChange:o=>{const a=parseInt(o.target.value)||1;c(s.id,Math.max(1,a))},className:"w-12 sm:w-16 text-center px-1 sm:px-2 py-1 sm:py-1.5 bg-primary/10 text-primary text-xs sm:text-sm font-bold rounded-lg border-2 border-transparent focus:border-primary focus:outline-none"}),e.jsx("button",{onClick:()=>c(s.id,s.quantity+1),className:"p-1 sm:p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(S,{size:12,className:"sm:w-3.5 sm:h-3.5 text-gray-600"})})]})]}),e.jsx("button",{onClick:()=>h(s.id),className:"text-red-500 hover:bg-red-50 p-1.5 sm:p-2 rounded-lg h-fit transition-all duration-200 flex-shrink-0",children:e.jsx(E,{size:16,className:"sm:w-[18px] sm:h-[18px]"})})]},`${s.id}-${s.cor||"default"}`)}),e.jsx("button",{onClick:p,className:"w-full py-2.5 sm:py-3 text-sm sm:text-base text-red-500 hover:bg-red-50 rounded-xl font-medium transition-all duration-200 border-2 border-red-200",children:"Limpar carrinho"})]})}),l.length>0&&e.jsxs("form",{onSubmit:y,className:"p-4 sm:p-6 border-t space-y-2.5 sm:space-y-3 bg-white shadow-lg flex-shrink-0",children:[e.jsx("input",{type:"text",placeholder:"Nome completo",value:t.name,onChange:s=>n({...t,name:s.target.value}),className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all",required:!0}),e.jsx("input",{type:"text",placeholder:"Contato",value:t.doc,onChange:s=>n({...t,doc:s.target.value}),className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all",required:!0}),e.jsx("input",{type:"text",placeholder:"Endereço",value:t.address,onChange:s=>n({...t,address:s.target.value}),className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all",required:!0}),e.jsx("input",{type:"text",placeholder:"CEP",value:t.cep,onChange:s=>n({...t,cep:s.target.value}),className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all",required:!0}),e.jsx("textarea",{placeholder:"Observações (opcional)",value:t.obs,onChange:s=>n({...t,obs:s.target.value}),rows:2,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 text-sm sm:text-base border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all resize-none"}),e.jsxs("button",{type:"submit",className:"w-full py-3 sm:py-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl font-title font-bold text-base sm:text-lg hover:shadow-lg transition-all duration-200 transform hover:scale-[1.02] flex items-center justify-center gap-2",children:[e.jsx(q,{size:18,className:"sm:w-5 sm:h-5"}),"Finalizar no WhatsApp"]})]})]})})]})}export{U as default};
