const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/CartSidebar.BoN1Jq0g.js","_astro/Providers.B5GdymyL.js","_astro/index.Ba-IbuDT.js","_astro/Layout.bhu3l071.js","_astro/phone.BtbWzz4L.js","_astro/x.Hvmk2xBt.js","_astro/plus.CS02u5bt.js","_astro/trash-2.C6qLbOUj.js","_astro/send.CN7XiF_m.js"])))=>i.map(i=>d[i]);
import{_ as z,j as e,P as _,g as E,d as I,b as M}from"./Providers.B5GdymyL.js";import{r as t}from"./index.Ba-IbuDT.js";import{c as x,u as q,o as h}from"./phone.BtbWzz4L.js";import{u as A,L as p,S as L}from"./Layout.bhu3l071.js";import{M as T,P as $}from"./plus.CS02u5bt.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=x("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=x("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=x("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=x("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),g=t.lazy(()=>z(()=>import("./CartSidebar.BoN1Jq0g.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])));function Q({productId:l}){const[c,j]=t.useState(l||""),[n,m]=t.useState(1),[o,v]=t.useState(""),[u,b]=t.useState(0),{add:N}=A();t.useEffect(()=>{if(!l&&typeof window<"u"){const s=window.location.pathname.split("/").pop()||"";j(decodeURIComponent(s))}},[l]);const{data:r,isLoading:w,error:k}=q({queryKey:["product",c],queryFn:async()=>{if(!c)throw new Error("ID não fornecido");const a=await E(I(M,"produtos",c));if(!a.exists())throw new Error("Produto não encontrado");return{id:a.id,...a.data()}},enabled:!!c,staleTime:5*60*1e3}),i=t.useMemo(()=>{if(!r)return[];const a=[];return r.imagem_url&&a.push({label:"Principal",url:h(r.imagem_url,"public")}),r.variacoes?.length&&r.variacoes.forEach(s=>{s.imagem_url&&a.push({label:s.cor,url:h(s.imagem_url,"public"),variation:s})}),a},[r]),d=i[u]||i[0],C=()=>{if(!r)return;if(r.variacoes?.length&&!o){alert("Selecione uma cor antes de adicionar ao carrinho");return}const a=o||d?.variation?.cor;for(let s=0;s<n;s++)N({...r,cor:a});alert("Produto adicionado ao carrinho!")},S=async()=>{if(!(typeof window>"u"))if(navigator.share)try{await navigator.share({title:r?.nome,text:`Confira este produto: ${r?.nome}`,url:window.location.href})}catch(a){console.log("Erro ao compartilhar:",a)}else navigator.clipboard.writeText(window.location.href),alert("Link copiado para a área de transferência!")};return k?e.jsxs(p,{children:[e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Produto não encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"O produto que você está procurando não existe ou foi removido."}),e.jsxs("a",{href:"/produtos",className:"inline-flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark transition-colors",children:[e.jsx(f,{size:20}),"Voltar ao catálogo"]})]}),e.jsx(t.Suspense,{fallback:null,children:e.jsx(g,{})})]}):w||!r?e.jsxs(p,{children:[e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-8"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"aspect-square bg-gray-200 rounded-2xl"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})]})]})}),e.jsx(t.Suspense,{fallback:null,children:e.jsx(g,{})})]}):e.jsxs(p,{children:[e.jsx("div",{className:"bg-gray-50 min-h-screen py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("a",{href:"/produtos",className:"flex items-center gap-2 text-gray-600 hover:text-primary transition-colors font-medium",children:[e.jsx(f,{size:20}),"Voltar ao catálogo"]}),e.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-lg transition-colors",children:[e.jsx(U,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Compartilhar"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 p-6 md:p-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl overflow-hidden mb-4",children:d&&e.jsx("img",{src:d.url,alt:`${r.nome} - ${d.label}`,className:"w-full h-full object-contain",loading:"eager"})}),i.length>1&&e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:i.map((a,s)=>e.jsxs("button",{type:"button",onClick:()=>b(s),className:`relative flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden transition-all ${s===u?"ring-3 ring-primary scale-110 shadow-lg":"ring-1 ring-gray-200 hover:ring-gray-300 opacity-70 hover:opacity-100"}`,children:[e.jsx("img",{src:h(a.url,"thumbnail"),alt:a.label,className:"w-full h-full object-cover",loading:"lazy"}),a.variation&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent px-1 py-1",children:e.jsx("span",{className:"text-[9px] text-white font-semibold block truncate text-center",children:a.variation.cor})})]},`${a.label}-${s}`))})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-xl flex-shrink-0",children:e.jsx(D,{className:"text-primary",size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"font-title font-bold text-2xl md:text-3xl text-gray-900 mb-2",children:r.nome}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(V,{size:16}),e.jsxs("span",{className:"font-mono font-semibold",children:["SKU: ",r.id]})]})]})]}),r.categorias?.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:r.categorias.map(a=>e.jsx("span",{className:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20 rounded-full text-xs font-semibold text-primary",children:a},a))}),r.descricao&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-900 mb-2",children:"Descrição"}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line leading-relaxed",children:r.descricao})]}),r.variacoes?.length?e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("label",{className:"text-sm font-bold text-gray-900",children:["Escolha a cor",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o&&e.jsxs("span",{className:"text-xs text-primary font-semibold",children:["✓ ",o]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.variacoes.map(a=>{const s=o===a.cor;return e.jsx("button",{type:"button",onClick:()=>{v(a.cor);const y=i.findIndex(P=>P.variation?.cor===a.cor);y>=0&&b(y)},className:`px-3 py-2.5 rounded-xl text-sm font-semibold transition-all ${s?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg scale-105":"bg-white text-gray-700 border-2 border-gray-200 hover:border-primary hover:bg-primary/5"}`,children:a.cor},a.cor)})}),!o&&e.jsxs("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[e.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-red-500 rounded-full"}),"Selecione uma cor antes de adicionar"]})]}):null,e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Quantidade"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>m(Math.max(1,n-1)),className:"p-2.5 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all",children:e.jsx(T,{size:18})}),e.jsx("input",{type:"number",min:"1",value:n,onChange:a=>m(Math.max(1,parseInt(a.target.value)||1)),className:"w-20 text-center px-3 py-2.5 bg-gray-50 text-gray-900 text-lg font-bold rounded-xl border-2 border-gray-300 focus:border-primary focus:outline-none"}),e.jsx("button",{type:"button",onClick:()=>m(n+1),className:"p-2.5 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all",children:e.jsx($,{size:18})}),e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:n===1?"un.":"uns."})]})]})]}),e.jsxs("div",{className:"space-y-2.5 pt-6 border-t border-gray-200",children:[e.jsxs("button",{onClick:C,className:"w-full inline-flex items-center justify-center gap-3 bg-gradient-to-r from-primary to-primary-dark text-white font-bold py-3.5 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-[1.02]",children:[e.jsx(L,{size:20}),"Adicionar ao Carrinho"]}),e.jsx("a",{href:"/produtos",className:"block w-full text-center py-2.5 rounded-xl border-2 border-gray-300 text-sm font-semibold text-gray-700 hover:bg-gray-50 transition-all",children:"Continuar Comprando"})]})]})]})})]})}),e.jsx(t.Suspense,{fallback:null,children:e.jsx(g,{})})]})}function F({productId:l}){return e.jsx(_,{children:e.jsx(Q,{productId:l})})}export{F as default};
