const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/HeroBanner.BmgWVs8W.js","_astro/Providers.xGLPAwM3.js","_astro/index.Ba-IbuDT.js","_astro/chevron-right.BkMAVnk-.js","_astro/PopularCategories.G48mVICv.js","_astro/CategorySidebar.DuzfLTGW.js","_astro/x.D_7acxyf.js","_astro/search.DWvdi_od.js","_astro/ProductGrid.lNZdBlrp.js","_astro/ProductModal.h6pX-Ebd.js","_astro/plus.Gskm66Er.js","_astro/CartSidebar.GijOY97R.js","_astro/trash-2.CSJwb4X7.js"])))=>i.map(i=>d[i]);
import{g as z,a as W,q as k,l as V,o as L,c as O,d as R,b as G,j as o,_ as I,P as Q}from"./Providers.xGLPAwM3.js";import{r as S,g as K,R as X}from"./index.Ba-IbuDT.js";import{u as Y,c as Z,o as ee,p as te,C as re,a as se}from"./chevron-right.BkMAVnk-.js";function H(e=6){return Y({queryKey:["catalog",e],queryFn:async()=>{const[s,r,n]=await Promise.all([z(k(O(R,"produtos"),L("createdAt","desc"),V(e))),z(k(O(R,"categorias"),L("nome"))),W(G(R,"config","layout"))]),a=s.docs.map(h=>({id:h.id,...h.data()})),t=r.docs.map(h=>({id:h.id,...h.data()})),l=n.exists()?n.data():{},g={logo:l.logo||"",banners:(l.banners||[]).map(h=>({url:h,alt:"Banner Rocha Brindes"})),promotions:l.promotions||[],popups:l.popups||[]};return{products:a,categories:t,layout:g}},staleTime:10*60*1e3,gcTime:30*60*1e3,placeholderData:ne()})}function ne(){if(!(typeof window>"u"))try{const e=localStorage.getItem("catalog-cache");if(e){const s=JSON.parse(e);if(Date.now()-s.timestamp<10*60*1e3)return s.catalog}}catch{return}}function oe(e){if(!(typeof window>"u"))try{localStorage.setItem("catalog-cache",JSON.stringify({catalog:e,timestamp:Date.now()}))}catch{console.warn("Failed to cache catalog")}}const ae={},T=e=>{let s;const r=new Set,n=(y,x)=>{const f=typeof y=="function"?y(s):y;if(!Object.is(f,s)){const v=s;s=x??(typeof f!="object"||f===null)?f:Object.assign({},s,f),r.forEach(p=>p(s,v))}},a=()=>s,h={setState:n,getState:a,getInitialState:()=>c,subscribe:y=>(r.add(y),()=>r.delete(y)),destroy:()=>{(ae?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},c=s=e(n,a,h);return h},ie=e=>e?T(e):T;var $={exports:{}},F={},M={exports:{}},q={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E=S;function ce(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var le=typeof Object.is=="function"?Object.is:ce,de=E.useState,ue=E.useEffect,me=E.useLayoutEffect,he=E.useDebugValue;function pe(e,s){var r=s(),n=de({inst:{value:r,getSnapshot:s}}),a=n[0].inst,t=n[1];return me(function(){a.value=r,a.getSnapshot=s,D(a)&&t({inst:a})},[e,r,s]),ue(function(){return D(a)&&t({inst:a}),e(function(){D(a)&&t({inst:a})})},[e]),he(r),r}function D(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!le(e,r)}catch{return!0}}function fe(e,s){return s()}var ge=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fe:pe;q.useSyncExternalStore=E.useSyncExternalStore!==void 0?E.useSyncExternalStore:ge;M.exports=q;var ve=M.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P=S,ye=ve;function xe(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var be=typeof Object.is=="function"?Object.is:xe,Se=ye.useSyncExternalStore,je=P.useRef,we=P.useEffect,_e=P.useMemo,Ee=P.useDebugValue;F.useSyncExternalStoreWithSelector=function(e,s,r,n,a){var t=je(null);if(t.current===null){var l={hasValue:!1,value:null};t.current=l}else l=t.current;t=_e(function(){function h(v){if(!c){if(c=!0,y=v,v=n(v),a!==void 0&&l.hasValue){var p=l.value;if(a(p,v))return x=p}return x=v}if(p=x,be(y,v))return p;var u=n(v);return a!==void 0&&a(p,u)?(y=v,p):(y=v,x=u)}var c=!1,y,x,f=r===void 0?null:r;return[function(){return h(s())},f===null?void 0:function(){return h(f())}]},[s,r,n,a]);var g=Se(e,t[0],t[1]);return we(function(){l.hasValue=!0,l.value=g},[g]),Ee(g),g};$.exports=F;var Ie=$.exports;const Ne=K(Ie),J={},{useDebugValue:Ce}=X,{useSyncExternalStoreWithSelector:Pe}=Ne;let A=!1;const Re=e=>e;function De(e,s=Re,r){(J?"production":void 0)!=="production"&&r&&!A&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),A=!0);const n=Pe(e.subscribe,e.getState,e.getServerState||e.getInitialState,s,r);return Ce(n),n}const ze=e=>{(J?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const s=typeof e=="function"?ie(e):e,r=(n,a)=>De(s,n,a);return Object.assign(r,s),r},ke=e=>ze,Le={};function Oe(e,s){let r;try{r=e()}catch{return}return{getItem:a=>{var t;const l=h=>h===null?null:JSON.parse(h,void 0),g=(t=r.getItem(a))!=null?t:null;return g instanceof Promise?g.then(l):l(g)},setItem:(a,t)=>r.setItem(a,JSON.stringify(t,void 0)),removeItem:a=>r.removeItem(a)}}const N=e=>s=>{try{const r=e(s);return r instanceof Promise?r:{then(n){return N(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return N(n)(r)}}}},Te=(e,s)=>(r,n,a)=>{let t={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:d=>d,version:0,merge:(d,b)=>({...b,...d}),...s},l=!1;const g=new Set,h=new Set;let c;try{c=t.getStorage()}catch{}if(!c)return e((...d)=>{console.warn(`[zustand persist middleware] Unable to update item '${t.name}', the given storage is currently unavailable.`),r(...d)},n,a);const y=N(t.serialize),x=()=>{const d=t.partialize({...n()});let b;const i=y({state:d,version:t.version}).then(m=>c.setItem(t.name,m)).catch(m=>{b=m});if(b)throw b;return i},f=a.setState;a.setState=(d,b)=>{f(d,b),x()};const v=e((...d)=>{r(...d),x()},n,a);let p;const u=()=>{var d;if(!c)return;l=!1,g.forEach(i=>i(n()));const b=((d=t.onRehydrateStorage)==null?void 0:d.call(t,n()))||void 0;return N(c.getItem.bind(c))(t.name).then(i=>{if(i)return t.deserialize(i)}).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==t.version){if(t.migrate)return t.migrate(i.state,i.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return i.state}).then(i=>{var m;return p=t.merge(i,(m=n())!=null?m:v),r(p,!0),x()}).then(()=>{b?.(p,void 0),l=!0,h.forEach(i=>i(p))}).catch(i=>{b?.(void 0,i)})};return a.persist={setOptions:d=>{t={...t,...d},d.getStorage&&(c=d.getStorage())},clearStorage:()=>{c?.removeItem(t.name)},getOptions:()=>t,rehydrate:()=>u(),hasHydrated:()=>l,onHydrate:d=>(g.add(d),()=>{g.delete(d)}),onFinishHydration:d=>(h.add(d),()=>{h.delete(d)})},u(),p||v},Ae=(e,s)=>(r,n,a)=>{let t={storage:Oe(()=>localStorage),partialize:u=>u,version:0,merge:(u,d)=>({...d,...u}),...s},l=!1;const g=new Set,h=new Set;let c=t.storage;if(!c)return e((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${t.name}', the given storage is currently unavailable.`),r(...u)},n,a);const y=()=>{const u=t.partialize({...n()});return c.setItem(t.name,{state:u,version:t.version})},x=a.setState;a.setState=(u,d)=>{x(u,d),y()};const f=e((...u)=>{r(...u),y()},n,a);a.getInitialState=()=>f;let v;const p=()=>{var u,d;if(!c)return;l=!1,g.forEach(i=>{var m;return i((m=n())!=null?m:f)});const b=((d=t.onRehydrateStorage)==null?void 0:d.call(t,(u=n())!=null?u:f))||void 0;return N(c.getItem.bind(c))(t.name).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==t.version){if(t.migrate)return[!0,t.migrate(i.state,i.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,i.state];return[!1,void 0]}).then(i=>{var m;const[w,j]=i;if(v=t.merge(j,(m=n())!=null?m:f),r(v,!0),w)return y()}).then(()=>{b?.(v,void 0),v=n(),l=!0,h.forEach(i=>i(v))}).catch(i=>{b?.(void 0,i)})};return a.persist={setOptions:u=>{t={...t,...u},u.storage&&(c=u.storage)},clearStorage:()=>{c?.removeItem(t.name)},getOptions:()=>t,rehydrate:()=>p(),hasHydrated:()=>l,onHydrate:u=>(g.add(u),()=>{g.delete(u)}),onFinishHydration:u=>(h.add(u),()=>{h.delete(u)})},t.skipHydration||p(),v||f},He=(e,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((Le?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Te(e,s)):Ae(e,s),$e=He,U=ke()($e((e,s)=>({items:[],isOpen:!1,count:0,category:"Todos",search:"",add:r=>{const n=s().items,t=n.find(l=>l.id===r.id)?n.map(l=>l.id===r.id?{...l,quantity:l.quantity+1}:l):[...n,{...r,quantity:1}];e({items:t,count:t.reduce((l,g)=>l+g.quantity,0)})},remove:r=>{const n=s().items.filter(a=>a.id!==r);e({items:n,count:n.reduce((a,t)=>a+t.quantity,0)})},updateQuantity:(r,n)=>{const a=s().items.map(t=>t.id===r?{...t,quantity:n}:t);e({items:a,count:a.reduce((t,l)=>t+l.quantity,0)})},clear:()=>e({items:[],count:0}),toggle:()=>e({isOpen:!s().isOpen}),setCategory:r=>e({category:r}),setSearch:r=>e({search:r})}),{name:"cart-storage"}));/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=Z("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);function Me(){const{count:e,toggle:s}=U(),{data:r,isLoading:n}=H(),a=r?.layout.logo,t=a?ee(a,"thumbnail"):"";return o.jsx("header",{className:"sticky top-0 z-40 bg-white shadow-md border-b border-gray-100",children:o.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-20",children:[n||!t?o.jsx("div",{className:"h-10 sm:h-14 md:h-16 w-32 sm:w-48 md:w-64 bg-gray-200 animate-pulse rounded"}):o.jsx("img",{src:t,alt:"Rocha Brindes",className:"h-5 sm:h-7 md:h-9 w-auto object-contain",loading:"eager"}),o.jsxs("button",{onClick:s,className:"relative p-2.5 sm:p-3 bg-primary hover:bg-primary-dark text-white rounded-full transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105","aria-label":"Abrir carrinho",children:[o.jsx(Fe,{size:20,className:"sm:w-6 sm:h-6",strokeWidth:2.5}),e>0&&o.jsx("span",{className:"absolute -top-1.5 -right-1.5 sm:-top-2 sm:-right-2 bg-accent text-dark font-bold text-[10px] sm:text-xs min-w-[20px] sm:min-w-[24px] h-[20px] sm:h-[24px] flex items-center justify-center rounded-full border-2 sm:border-3 border-white shadow-md",children:e})]})]})})})}const qe=S.lazy(()=>I(()=>import("./HeroBanner.BmgWVs8W.js"),__vite__mapDeps([0,1,2,3]))),Je=S.lazy(()=>I(()=>import("./PopularCategories.G48mVICv.js"),__vite__mapDeps([4,1,2,3]))),Ue=S.lazy(()=>I(()=>import("./CategorySidebar.DuzfLTGW.js"),__vite__mapDeps([5,1,2,3,6,7]))),Be=S.lazy(()=>I(()=>import("./ProductGrid.lNZdBlrp.js"),__vite__mapDeps([8,1,2,3]))),We=S.lazy(()=>I(()=>import("./ProductModal.h6pX-Ebd.js"),__vite__mapDeps([9,1,2,3,6,10]))),Ve=S.lazy(()=>I(()=>import("./CartSidebar.GijOY97R.js"),__vite__mapDeps([11,1,2,3,6,10,12])));function Ge(){const{data:e,isLoading:s}=H(1e3),{category:r,search:n,add:a,setCategory:t,setSearch:l}=U(),[g,h]=S.useState(null),[c,y]=S.useState(0),x=6;S.useEffect(()=>{if(e){oe(e);const i=[];e.layout.logo&&i.push(e.layout.logo),e.layout.banners[0]?.url&&i.push(e.layout.banners[0].url),te(i)}},[e]),S.useEffect(()=>{y(0),window.scrollTo({top:0,behavior:"smooth"})},[r,n]);const f=S.useMemo(()=>e?e.products.filter(i=>{const m=r==="Todos"||i.categorias?.includes(r),w=!n||i.nome.toLowerCase().includes(n.toLowerCase())||i.id.toLowerCase().includes(n.toLowerCase());return m&&w}):[],[e,r,n]),v=S.useMemo(()=>{const i=c*x;return f.slice(i,i+x)},[f,c,x]),p=Math.ceil(f.length/x),u=i=>{y(i),window.scrollTo({top:0,behavior:"smooth"})},d=o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((i,m)=>o.jsx("div",{className:"bg-white rounded-xl h-96 animate-pulse"},m))}),b=()=>{if(p<=1)return null;const i=()=>{const m=[],w=c>2,j=c<p-3;if(p<=7)for(let _=0;_<p;_++)m.push(_);else{m.push(0),w&&m.push("...");const _=Math.max(1,c-1),B=Math.min(p-2,c+1);for(let C=_;C<=B;C++)m.includes(C)||m.push(C);j&&m.push("..."),m.includes(p-1)||m.push(p-1)}return m};return o.jsxs("div",{className:"mt-12 mb-20 lg:mb-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>u(c-1),disabled:c===0,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-sm",children:[o.jsx(re,{size:18}),o.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),o.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:i().map((m,w)=>{if(m==="...")return o.jsx("span",{className:"px-2 py-2 text-gray-400",children:"..."},`ellipsis-${w}`);const j=m,_=j===c;return o.jsx("button",{onClick:()=>u(j),className:`min-w-[40px] h-[40px] px-3 py-2 rounded-lg font-semibold text-sm transition-all ${_?"bg-primary text-white shadow-md scale-110":"bg-white border-2 border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-primary"}`,children:j+1},j)})}),o.jsxs("button",{onClick:()=>u(c+1),disabled:c>=p-1,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-sm",children:[o.jsx("span",{className:"hidden sm:inline",children:"Próxima"}),o.jsx(se,{size:18})]})]}),o.jsxs("div",{className:"text-sm text-gray-600 font-medium",children:["Página ",o.jsx("span",{className:"font-bold text-primary",children:c+1})," de"," ",o.jsx("span",{className:"font-bold",children:p}),o.jsxs("span",{className:"hidden sm:inline",children:[" • ",f.length," ",f.length===1?"produto":"produtos"]})]})]})};return o.jsxs(o.Fragment,{children:[o.jsx(Me,{}),o.jsx("main",{className:"min-h-screen bg-gray-50 pt-4 md:pt-8",children:o.jsxs("div",{className:"container mx-auto px-4 pb-4",children:[o.jsx(S.Suspense,{fallback:o.jsx("div",{className:"mb-8 h-48 md:h-56 rounded-2xl bg-gray-100 animate-pulse"}),children:o.jsx(qe,{banners:e?.layout.banners||[]})}),o.jsx(S.Suspense,{fallback:null,children:o.jsx(Je,{categories:e?.categories.filter(i=>i.popular).slice(0,4)||[],onSelect:t})}),o.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-8",children:[o.jsx(S.Suspense,{fallback:null,children:o.jsx(Ue,{categories:e?.categories.map(i=>i.nome)||[],selected:r,onSelect:t,search:n,onSearch:l})}),o.jsx("div",{children:s?d:f.length===0?o.jsxs("div",{className:"text-center py-20",children:[o.jsx("p",{className:"text-xl text-gray-500",children:"Nenhum produto encontrado"}),n&&o.jsx("button",{onClick:()=>l(""),className:"mt-4 px-6 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-all",children:"Limpar busca"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-4 flex items-center justify-between",children:o.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",o.jsx("span",{className:"font-semibold",children:c*x+1})," -"," ",o.jsx("span",{className:"font-semibold",children:Math.min((c+1)*x,f.length)})," de"," ",o.jsx("span",{className:"font-semibold",children:f.length})," ",f.length===1?"produto":"produtos"]})}),o.jsx(S.Suspense,{fallback:d,children:o.jsx(Be,{products:v,onView:h,onAdd:a})}),b()]})})]})]})}),o.jsxs(S.Suspense,{fallback:null,children:[g&&o.jsx(We,{product:g,onClose:()=>h(null)}),o.jsx(Ve,{})]})]})}function Ye(){return o.jsx(Q,{children:o.jsx(Ge,{})})}export{Ye as H,Fe as S,U as u};
