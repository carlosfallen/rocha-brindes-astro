const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/CategorySidebar.BqBp2g6y.js","_astro/Providers.B5GdymyL.js","_astro/index.Ba-IbuDT.js","_astro/phone.BtbWzz4L.js","_astro/x.Hvmk2xBt.js","_astro/search.DBDGBw6m.js","_astro/ProductGrid.8GbHllQ6.js","_astro/ProductCard.DmjdBQN4.js","_astro/Layout.bhu3l071.js","_astro/CartSidebar.BoN1Jq0g.js","_astro/plus.CS02u5bt.js","_astro/trash-2.C6qLbOUj.js","_astro/send.CN7XiF_m.js"])))=>i.map(i=>d[i]);
import{_ as u,j as e,P as _}from"./Providers.B5GdymyL.js";import{r}from"./index.Ba-IbuDT.js";import{a as P,u as E,L}from"./Layout.bhu3l071.js";import{C as S,a as k}from"./chevron-right.BkJXu179.js";import"./phone.BtbWzz4L.js";const z=r.lazy(()=>u(()=>import("./CategorySidebar.BqBp2g6y.js"),__vite__mapDeps([0,1,2,3,4,5]))),M=r.lazy(()=>u(()=>import("./ProductGrid.8GbHllQ6.js"),__vite__mapDeps([6,1,2,7,3,8]))),T=r.lazy(()=>u(()=>import("./CartSidebar.BoN1Jq0g.js"),__vite__mapDeps([9,1,2,8,3,4,10,11,12])));function A(){const{data:x,isLoading:y}=P(1e3),{category:m,search:i,setCategory:v,setSearch:b}=E(),[t,f]=r.useState(0),d=12;r.useEffect(()=>{f(0),window.scrollTo({top:0,behavior:"smooth"})},[m,i]);const n=r.useMemo(()=>x?x.products.filter(a=>{const s=m==="Todos"||a.categorias?.includes(m),h=!i||a.nome.toLowerCase().includes(i.toLowerCase())||a.id.toLowerCase().includes(i.toLowerCase());return s&&h}):[],[x,m,i]),N=r.useMemo(()=>{const a=t*d;return n.slice(a,a+d)},[n,t,d]),o=Math.ceil(n.length/d),g=a=>{f(a),window.scrollTo({top:0,behavior:"smooth"})},j=e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(12)].map((a,s)=>e.jsx("div",{className:"bg-white rounded-xl h-96 animate-pulse"},s))}),w=()=>{if(o<=1)return null;const a=()=>{const s=[],h=t>2,c=t<o-3;if(o<=7)for(let l=0;l<o;l++)s.push(l);else{s.push(0),h&&s.push("...");const l=Math.max(1,t-1),C=Math.min(o-2,t+1);for(let p=l;p<=C;p++)s.includes(p)||s.push(p);c&&s.push("..."),s.includes(o-1)||s.push(o-1)}return s};return e.jsxs("div",{className:"mt-12 flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>g(t-1),disabled:t===0,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-sm",children:[e.jsx(S,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),e.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:a().map((s,h)=>{if(s==="...")return e.jsx("span",{className:"px-2 py-2 text-gray-400",children:"..."},`ellipsis-${h}`);const c=s,l=c===t;return e.jsx("button",{onClick:()=>g(c),className:`min-w-[40px] h-[40px] px-3 py-2 rounded-lg font-semibold text-sm transition-all ${l?"bg-primary text-white shadow-md scale-110":"bg-white border-2 border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-primary"}`,children:c+1},c)})}),e.jsxs("button",{onClick:()=>g(t+1),disabled:t>=o-1,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:"Próxima"}),e.jsx(k,{size:18})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 font-medium",children:["Página ",e.jsx("span",{className:"font-bold text-primary",children:t+1})," de"," ",e.jsx("span",{className:"font-bold",children:o}),e.jsxs("span",{className:"hidden sm:inline",children:[" • ",n.length," ",n.length===1?"produto":"produtos"]})]})]})};return e.jsxs(L,{children:[e.jsx("div",{className:"bg-gray-50 min-h-screen pt-8 pb-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"font-title font-bold text-3xl md:text-4xl text-dark mb-2",children:"Catálogo de Produtos"}),e.jsx("p",{className:"text-gray-600",children:"Explore nossa linha completa de brindes personalizados"})]}),e.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-8",children:[e.jsx(r.Suspense,{fallback:null,children:e.jsx(z,{categories:x?.categories.map(a=>a.nome)||[],selected:m,onSelect:v,search:i,onSearch:b})}),e.jsx("div",{children:y?j:n.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("p",{className:"text-xl text-gray-500",children:"Nenhum produto encontrado"}),i&&e.jsx("button",{onClick:()=>b(""),className:"mt-4 px-6 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-all",children:"Limpar busca"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-semibold",children:t*d+1})," -"," ",e.jsx("span",{className:"font-semibold",children:Math.min((t+1)*d,n.length)})," de"," ",e.jsx("span",{className:"font-semibold",children:n.length})," ",n.length===1?"produto":"produtos"]})}),e.jsx(r.Suspense,{fallback:j,children:e.jsx(M,{products:N,linkToPage:!0})}),w()]})})]})]})}),e.jsx(r.Suspense,{fallback:null,children:e.jsx(T,{})})]})}function $(){return e.jsx(_,{children:e.jsx(A,{})})}export{$ as default};
