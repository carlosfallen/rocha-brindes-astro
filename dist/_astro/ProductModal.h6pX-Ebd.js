import{j as e}from"./Providers.xGLPAwM3.js";import{r as n}from"./index.Ba-IbuDT.js";import{c as b,o as c}from"./chevron-right.BkMAVnk-.js";import{u as w,S as k}from"./Home.CM6H4gXI.js";import{X as C}from"./x.D_7acxyf.js";import{M,P as z}from"./plus.Gskm66Er.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=b("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=b("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),U=n.memo(function({product:r,onClose:d}){const{add:f}=w(),[m,x]=n.useState(1),[l,u]=n.useState(""),t=n.useMemo(()=>{const a=[];return r.imagem_url&&a.push({label:"Principal",url:c(r.imagem_url,"public")}),r.variacoes?.length&&r.variacoes.forEach(s=>{s.imagem_url&&a.push({label:s.cor,url:c(s.imagem_url,"thumbnail"),variation:s})}),!a.length&&r.imagens_urls?.length&&r.imagens_urls.forEach((s,i)=>{a.push({label:i===0?"Imagem":`Imagem ${i+1}`,url:c(s,"thumbnail")})}),a},[r]),[h,g]=n.useState(0),o=t[h]||t[0],p=()=>{if(r.variacoes?.length&&!l){alert("Selecione uma cor antes de adicionar ao orçamento");return}const a=l||o?.variation?.cor;for(let s=0;s<m;s++)f({...r,cor:a});d()},y=()=>{x(a=>a+1)},v=()=>{x(a=>Math.max(1,a-1))},j=a=>{const s=parseInt(a.target.value)||1;x(Math.max(1,s))};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl w-full max-w-6xl max-h-[95vh] overflow-hidden shadow-2xl flex flex-col",children:[e.jsx("button",{onClick:d,className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm text-gray-700 rounded-full p-2.5 z-10 hover:bg-white shadow-lg transition-all",children:e.jsx(C,{size:20})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 flex-1 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 flex flex-col",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden",children:o&&e.jsx("img",{src:o.url,alt:`${r.nome} - ${o.label}`,className:"w-full h-full object-contain drop-shadow-xl",loading:"eager",style:{maxHeight:"70vh"}})}),t.length>1&&e.jsx("div",{className:"border-t border-gray-200 bg-white/80 backdrop-blur-sm px-4 py-3 flex gap-2 overflow-x-auto flex-shrink-0",children:t.map((a,s)=>e.jsxs("button",{type:"button",onClick:()=>g(s),className:`relative flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden transition-all ${s===h?"ring-3 ring-primary scale-110 shadow-lg":"ring-1 ring-gray-200 hover:ring-gray-300 opacity-70 hover:opacity-100"}`,title:a.label,children:[e.jsx("img",{src:c(a.url,"thumbnail"),alt:a.label,className:"w-full h-full object-cover",loading:"lazy"}),a.variation&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent px-1 py-1",children:e.jsx("span",{className:"text-[9px] text-white font-semibold block truncate text-center",children:a.variation.cor})})]},`${a.label}-${s}`))})]}),e.jsxs("div",{className:"flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-xl flex-shrink-0",children:e.jsx(S,{className:"text-primary",size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"font-title font-bold text-xl md:text-2xl text-gray-900 mb-2 break-words leading-tight",children:r.nome}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(I,{size:16,className:"flex-shrink-0"}),e.jsxs("span",{className:"font-mono font-semibold break-all",children:["SKU: ",r.id]})]})]})]}),r.categorias?.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:r.categorias.map(a=>e.jsx("span",{className:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20 rounded-full text-xs font-semibold text-primary",children:a},a))})]}),r.descricao&&e.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl border border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line break-words leading-relaxed",children:r.descricao})}),r.variacoes?.length?e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("label",{className:"text-sm font-bold text-gray-900",children:["Escolha a cor",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),l&&e.jsxs("span",{className:"text-xs text-primary font-semibold",children:["✓ ",l]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-[200px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:r.variacoes?.map(a=>{const s=l===a.cor;return e.jsx("button",{type:"button",onClick:()=>{u(a.cor);const i=t.findIndex(N=>N.variation?.cor===a.cor);i>=0&&g(i)},className:`px-3 py-2.5 rounded-xl text-sm font-semibold transition-all break-words text-left ${s?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg scale-105":"bg-white text-gray-700 border-2 border-gray-200 hover:border-primary hover:bg-primary/5"}`,children:a.cor},a.cor)})}),r.variacoes.length>0&&!l&&e.jsxs("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[e.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-red-500 rounded-full"}),"Selecione uma cor antes de adicionar"]})]}):null,e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Quantidade"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:v,className:"p-2.5 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all flex-shrink-0",children:e.jsx(M,{size:18,className:"text-gray-700"})}),e.jsx("input",{type:"number",min:"1",value:m,onChange:j,className:"w-20 text-center px-3 py-2.5 bg-gray-50 text-gray-900 text-lg font-bold rounded-xl border-2 border-gray-300 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"}),e.jsx("button",{type:"button",onClick:y,className:"p-2.5 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all flex-shrink-0",children:e.jsx(z,{size:18,className:"text-gray-700"})}),e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:m===1?"un.":"uns."})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 bg-white p-4 md:p-6 space-y-2.5 flex-shrink-0",children:[e.jsxs("button",{onClick:p,className:"w-full inline-flex items-center justify-center gap-3 bg-gradient-to-r from-primary to-primary-dark text-white font-bold py-3.5 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-[1.02]",children:[e.jsx(k,{size:20}),e.jsx("span",{className:"text-sm md:text-base",children:"Adicionar ao Orçamento"})]}),e.jsx("button",{onClick:d,className:"w-full py-2.5 rounded-xl border-2 border-gray-300 text-sm font-semibold text-gray-700 hover:bg-gray-50 transition-all",children:"Continuar Comprando"})]})]})]})]})})});export{U as default};
