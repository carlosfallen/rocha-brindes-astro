import{q as ee,o as se,c as Y,d as L,g as le,j as e,s as te,b as T,h as me,r as W,u as X,i as Z,k as J,m as ae,n as ue,l as oe,p as pe,t as ie,a as ge,v as xe,f as he}from"./Providers.Bn6N5NNK.js";import{r as n}from"./index.Ba-IbuDT.js";import{c as ne,u as ce,o as R}from"./createLucideIcon.CWG7bwo-.js";import{X as O}from"./x.BescSzEA.js";import{T as de}from"./trash-2.uf3-JoHh.js";import{C as be,a as fe}from"./chevron-right.DdIaT1Ni.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=ne("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function re(){return ce({queryKey:["categories"],queryFn:async()=>{const t=ee(Y(L,"categorias"),se("nome"));return(await le(t)).docs.map(u=>({id:u.id,...u.data()}))},staleTime:5*60*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1})}function je(){const[t,g]=n.useState(""),[u,j]=n.useState(""),[k,b]=n.useState(""),[v,S]=n.useState(!1),[_,N]=n.useState([]),[A,w]=n.useState(null),[I,z]=n.useState(""),[f,$]=n.useState([]),[c,C]=n.useState(""),[l,m]=n.useState(!1),[h,U]=n.useState(""),{data:B=[]}=re(),q=o=>{const s=o.target.files?.[0];s&&(w(s),z(URL.createObjectURL(s)))},r=()=>{c.trim()&&($([...f,{cor:c.trim(),image:null,preview:""}]),C(""))},a=(o,s)=>{const i=[...f];i[o].image=s,i[o].preview=URL.createObjectURL(s),$(i)},p=o=>{$(f.filter((s,i)=>i!==o))};async function y(o,s){const i=o.name.split(".").pop()||"jpg",d=W(J,`${s}.${i}`);return await X(d,o),Z(d)}const x=async o=>{o.preventDefault(),m(!0),U("");try{if(!A)throw new Error("Selecione a imagem principal");if(!u.trim())throw new Error("Informe um código/SKU");const s=Date.now(),i=`products/${u}/main/${s}`,d=await y(A,`${i}_orig`),P=R(d),K=[],F=[d],H=[P];for(const D of f){if(!D.image)continue;const M=Date.now(),Q=`products/${u}/variations/${D.cor}/${M}`,V=await y(D.image,`${Q}_orig`),G=R(V);K.push({cor:D.cor,imagem_url:V,thumb_url:G}),F.push(V),H.push(G)}await te(T(Y(L,"produtos"),u),{id:u,nome:t,descricao:k,categorias:_,destaque:v,variacoes:K,imagem_url:d,thumb_url:P,imagens_urls:F,thumbs_urls:H,createdAt:me()}),U("Produto salvo com sucesso!"),g(""),j(""),b(""),S(!1),N([]),w(null),z(""),$([])}catch(s){console.error(s),U(s instanceof Error?s.message:"Erro ao salvar produto")}finally{m(!1)}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-title font-bold mb-6",children:"Adicionar Produto"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome"}),e.jsx("input",{type:"text",value:t,onChange:o=>g(o.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"SKU/Código"}),e.jsx("input",{type:"text",value:u,onChange:o=>j(o.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:k,onChange:o=>b(o.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Categorias"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:B.map(o=>e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",checked:_.includes(o.nome),onChange:s=>{s.target.checked?N(i=>[...i,o.nome]):N(i=>i.filter(d=>d!==o.nome))},className:"rounded"}),e.jsx("span",{className:"text-sm",children:o.nome})]},o.id))})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:o=>S(o.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Produto em destaque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem Principal *"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:I?e.jsxs("div",{className:"relative aspect-square max-w-xs mx-auto",children:[e.jsx("img",{src:I,alt:"Preview",className:"w-full h-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>{w(null),z("")},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1",children:e.jsx(O,{size:16})})]}):e.jsxs("label",{className:"flex flex-col items-center gap-2 cursor-pointer",children:[e.jsx(E,{className:"text-gray-400",size:48}),e.jsx("span",{className:"text-sm text-gray-600",children:"Clique para selecionar imagem principal"}),e.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"hidden",required:!0})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Variações de Cor"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:c,onChange:o=>C(o.target.value),onKeyDown:o=>{o.key==="Enter"&&(o.preventDefault(),r())},placeholder:"Nome da cor (ex: Vermelho, Preto fosco)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"}),e.jsx("button",{type:"button",onClick:r,className:"bg-primary hover:opacity-90 text-text-primary px-4 py-2 rounded-lg font-semibold",children:"Adicionar"})]}),e.jsx("div",{className:"space-y-3",children:f.map((o,s)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm mb-2",children:o.cor}),o.preview?e.jsx("div",{className:"relative w-24 h-24",children:e.jsx("img",{src:o.preview,alt:o.cor,className:"w-full h-full object-cover rounded"})}):e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50",children:[e.jsx(E,{size:16}),e.jsx("span",{className:"text-xs",children:"Adicionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:i=>{const d=i.target.files?.[0];d&&a(s,d)},className:"hidden"})]})]}),e.jsx("button",{type:"button",onClick:()=>p(s),className:"text-red-500 hover:bg-red-50 p-2 rounded",children:e.jsx(O,{size:18})})]},s))})]}),h&&e.jsx("p",{className:`text-center font-semibold ${h.includes("sucesso")?"text-green-600":"text-red-600"}`,children:h}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary hover:opacity-90 text-text-primary font-bold py-3 rounded-lg transition-all disabled:opacity-50",children:l?"Salvando...":"Salvar Produto"})]})]})}function ve({product:t,onClose:g}){const[u,j]=n.useState(t.nome||""),[k,b]=n.useState(t.descricao||""),[v,S]=n.useState(t.destaque||!1),[_,N]=n.useState(t.categorias||[]),[A,w]=n.useState(null),[I,z]=n.useState(t.imagem_url||""),[f,$]=n.useState(t.variacoes?.map(s=>({cor:s.cor,image:null,preview:s.imagem_url,existingUrl:s.imagem_url}))||[]),[c,C]=n.useState(""),[l,m]=n.useState(!1),[h,U]=n.useState(""),{data:B=[]}=re(),q=s=>{const i=s.target.files?.[0];i&&(w(i),z(URL.createObjectURL(i)))},r=()=>{c.trim()&&($([...f,{cor:c.trim(),image:null,preview:""}]),C(""))},a=(s,i)=>{const d=[...f];d[s].image=i,d[s].preview=URL.createObjectURL(i),$(d)},p=s=>{$(f.filter((i,d)=>d!==s))};async function y(s,i){const d=s.name.split(".").pop()||"jpg",P=W(J,`${i}.${d}`);return await X(P,s),Z(P)}async function x(s,i){const d=W(J,i);return await X(d,s),await Z(d)}const o=async s=>{s.preventDefault(),m(!0),U("");try{const i=Date.now();let d=t.imagem_url,P=t.thumb_url;if(A){const D=`products/${t.id}/main/${i}`;d=await y(A,`${D}_orig`);const M=await x(A,D);P=R(M)}const K=[],F=[d||""],H=[P||""];for(const D of f)if(D.image){const M=Date.now(),Q=`products/${t.id}/variations/${D.cor}/${M}`,V=await y(D.image,`${Q}_orig`),G=R(V);K.push({cor:D.cor,imagem_url:V,thumb_url:G}),F.push(V),H.push(G)}else if(D.existingUrl){const M=t.variacoes?.find(Q=>Q.cor===D.cor);M&&(K.push(M),F.push(M.imagem_url),H.push(M.thumb_url||M.imagem_url))}await ae(T(L,"produtos",t.id),{nome:u,descricao:k,categorias:_,destaque:v,variacoes:K,imagem_url:d,thumb_url:P,imagens_urls:F,thumbs_urls:H}),U("Produto atualizado com sucesso!"),setTimeout(()=>g(),1500)}catch(i){console.error(i),U(i instanceof Error?i.message:"Erro ao atualizar produto")}finally{m(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-title font-bold",children:"Editar Produto"}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(O,{size:20})})]}),e.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome"}),e.jsx("input",{type:"text",value:u,onChange:s=>j(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"SKU/Código"}),e.jsx("input",{type:"text",value:t.id,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Descrição"}),e.jsx("textarea",{value:k,onChange:s=>b(s.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Categorias"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:B.map(s=>e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",checked:_.includes(s.nome),onChange:i=>{i.target.checked?N(d=>[...d,s.nome]):N(d=>d.filter(P=>P!==s.nome))},className:"rounded"}),e.jsx("span",{className:"text-sm",children:s.nome})]},s.id))})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:s=>S(s.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Produto em destaque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem Principal"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:I?e.jsxs("div",{className:"relative aspect-square max-w-xs mx-auto",children:[e.jsx("img",{src:I,alt:"Preview",className:"w-full h-full object-contain"}),e.jsxs("label",{className:"absolute bottom-2 right-2 bg-primary text-text-primary p-2 rounded-full cursor-pointer hover:opacity-90",children:[e.jsx(E,{size:16}),e.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"hidden"})]})]}):e.jsxs("label",{className:"flex flex-col items-center gap-2 cursor-pointer",children:[e.jsx(E,{className:"text-gray-400",size:48}),e.jsx("span",{className:"text-sm text-gray-600",children:"Clique para selecionar imagem principal"}),e.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Variações de Cor"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:c,onChange:s=>C(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),r())},placeholder:"Nome da cor",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"}),e.jsx("button",{type:"button",onClick:r,className:"bg-primary hover:opacity-90 text-text-primary px-4 py-2 rounded-lg font-semibold",children:"Adicionar"})]}),e.jsx("div",{className:"space-y-3",children:f.map((s,i)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm mb-2",children:s.cor}),s.preview?e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsx("img",{src:s.preview,alt:s.cor,className:"w-full h-full object-cover rounded"}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary text-text-primary p-1 rounded cursor-pointer",children:[e.jsx(E,{size:12}),e.jsx("input",{type:"file",accept:"image/*",onChange:d=>{const P=d.target.files?.[0];P&&a(i,P)},className:"hidden"})]})]}):e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50",children:[e.jsx(E,{size:16}),e.jsx("span",{className:"text-xs",children:"Adicionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:d=>{const P=d.target.files?.[0];P&&a(i,P)},className:"hidden"})]})]}),e.jsx("button",{type:"button",onClick:()=>p(i),className:"text-red-500 hover:bg-red-50 p-2 rounded",children:e.jsx(O,{size:18})})]},i))})]}),h&&e.jsx("p",{className:`text-center font-semibold ${h.includes("sucesso")?"text-green-600":"text-red-600"}`,children:h}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary hover:opacity-90 text-text-primary font-bold py-3 rounded-lg transition-all disabled:opacity-50",children:l?"Salvando...":"Salvar Alterações"})]})]})})}function Ne(){const[t,g]=n.useState(0),[u,j]=n.useState([]),[k,b]=n.useState(null),v=50,S=ue(),_=n.useMemo(()=>{const c=ee(Y(L,"produtos"),se("createdAt","desc"),oe(v));return t>0&&u[t-1]?ee(Y(L,"produtos"),se("createdAt","desc"),pe(u[t-1]),oe(v)):c},[t,u,v]),{data:N=[],isLoading:A,refetch:w,isFetching:I}=ce({queryKey:["admin-products",t,v,u[t-1]?.id],queryFn:async()=>{const C=(await le(_)).docs;return C.length>0&&j(l=>{const m=[...l];return m[t]=C[C.length-1],m}),C.map(l=>({id:l.id,...l.data()}))},placeholderData:c=>c??[],staleTime:3e4}),z=async c=>{confirm("Tem certeza que deseja excluir este produto?")&&(await ie(T(L,"produtos",c)),await S.invalidateQueries({queryKey:["admin-products"]}),await w())},f=c=>{b(c)},$=()=>{b(null),S.invalidateQueries({queryKey:["admin-products"]}),w()};return A&&!N.length?e.jsx("div",{className:"text-center py-8",children:"Carregando produtos..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-xl font-title font-bold",children:["Produtos Cadastrados ",I&&e.jsx("span",{className:"text-sm text-gray-400",children:"(atualizando…)"})]})}),e.jsx("div",{className:"max-h-[600px] overflow-auto divide-y",children:N.map(c=>e.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 hover:bg-gray-50",children:[e.jsx("img",{src:c.imagem_url||(c.imagens_urls?.[0]??""),alt:c.nome??"Produto",className:"w-16 h-16 object-contain rounded bg-gray-50"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:c.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",c.id]}),e.jsx("div",{className:"flex gap-2 mt-1 flex-wrap",children:c.categorias?.map(C=>e.jsx("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:C},C))}),c.variacoes&&c.variacoes.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[c.variacoes.length," variações de cor"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(c),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:e.jsx(ye,{size:18})}),e.jsx("button",{onClick:()=>z(c.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Excluir",children:e.jsx(de,{size:18})})]})]},c.id))}),e.jsxs("div",{className:"p-4 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>g(c=>Math.max(0,c-1)),disabled:t===0,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50 hover:bg-gray-200",children:[e.jsx(be,{size:18}),"Anterior"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Página ",t+1]}),e.jsxs("button",{onClick:()=>g(c=>c+1),disabled:N.length<v,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg disabled:opacity-50 hover:bg-gray-200",children:["Próximo",e.jsx(fe,{size:18})]})]})]}),k&&e.jsx(ve,{product:k,onClose:$})]})}function we(){const[t,g]=n.useState(""),[u,j]=n.useState(!1),[k,b]=n.useState(null),[v,S]=n.useState(""),[_,N]=n.useState(!1),{data:A=[],refetch:w}=re(),I=l=>{const m=l.target.files?.[0];m&&(b(m),S(URL.createObjectURL(m)))};async function z(l,m){const h=W(J,m);return await X(h,l),Z(h)}const f=async l=>{l.preventDefault(),N(!0);try{const m=t.toLowerCase().replace(/\s+/g,"-");let h="";if(k){const U=await z(k,`assets/layout/categories/${m}/${Date.now()}.jpg`);h=R(U)}await te(T(L,"categorias",m),{id:m,nome:t,productCount:0,popular:u,imagePath:h}),g(""),j(!1),b(null),S(""),w()}catch(m){console.error(m),alert("Erro ao criar categoria")}finally{N(!1)}},$=async l=>{if(confirm("Tem certeza? Esta ação não pode ser desfeita."))try{await ie(T(L,"categorias",l)),w()}catch(m){console.error(m),alert("Erro ao excluir categoria")}},c=async l=>{try{await ae(T(L,"categorias",l.id),{popular:!l.popular}),w()}catch(m){console.error(m),alert("Não foi possível atualizar popular")}},C=async(l,m)=>{try{const h=await z(m,`assets/layout/categories/${l.id}/${Date.now()}.jpg`),U=R(h);await ae(T(L,"categorias",l.id),{imagePath:U}),w()}catch(h){console.error(h),alert("Não foi possível atualizar a imagem")}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-title font-bold mb-6",children:"Gerenciar Categorias"}),e.jsxs("form",{onSubmit:f,className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Nome da categoria"}),e.jsx("input",{type:"text",value:t,onChange:l=>g(l.target.value),placeholder:"Nome da categoria",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Imagem da categoria"}),v?e.jsxs("div",{className:"relative w-full h-24",children:[e.jsx("img",{src:v,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{b(null),S("")},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1",children:e.jsx(O,{size:14})})]}):e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx(E,{size:16}),e.jsx("span",{className:"text-sm",children:"Selecionar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"hidden"})]})]})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:l=>j(l.target.checked),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm font-semibold",children:"Marcar como categoria popular"})]}),e.jsx("button",{type:"submit",disabled:_,className:"w-full bg-primary hover:opacity-90 text-text-primary font-semibold px-6 py-3 rounded-lg disabled:opacity-50",children:_?"Criando...":"Criar Categoria"})]}),e.jsx("div",{className:"space-y-2",children:A.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[l.imagePath&&e.jsx("img",{src:l.imagePath,alt:l.nome,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:l.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:[l.productCount||0," produtos"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3",children:[e.jsx("button",{onClick:()=>void c(l),className:`px-3 py-1 rounded border text-sm ${l.popular?"bg-green-600 text-white border-green-600":"bg-white text-gray-700 border-gray-300"}`,children:l.popular?"Popular ✓":"Marcar como popular"}),e.jsxs("label",{className:"flex items-center gap-2 px-3 py-1 bg-white border border-gray-300 rounded cursor-pointer hover:bg-gray-50",children:[e.jsx(E,{size:14}),e.jsx("span",{className:"text-xs",children:"Alterar imagem"}),e.jsx("input",{type:"file",accept:"image/*",onChange:m=>{const h=m.target.files?.[0];h&&C(l,h)},className:"hidden"})]})]})]})]}),e.jsx("button",{onClick:()=>void $(l.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",children:e.jsx(de,{size:18})})]},l.id))})]})}function Ce(){const[t,g]=n.useState({banners:[],promotions:[],popups:[]}),[u,j]=n.useState(!1),[k,b]=n.useState(""),[v,S]=n.useState(""),[_,N]=n.useState([]),[A,w]=n.useState([]),[I,z]=n.useState([]);n.useEffect(()=>{$()},[]);async function f(r,a){const p=W(J,a);return await X(p,r),Z(p)}const $=async()=>{try{const r=await ge(T(L,"config","layout"));if(r.exists()){const a=r.data();g(a),S(a.logo||""),N(a.banners||[]),w(a.promotions||[]),z(a.popups||[])}}catch(r){console.error("Erro ao carregar assets:",r)}},c=async r=>{j(!0);try{const a=await f(r,`assets/layout/logo/${Date.now()}.jpg`),p=R(a),y={...t,logo:p};g(y),S(p),await q(y),b("Logo atualizado com sucesso!")}catch(a){console.error(a),b("Erro ao fazer upload do logo")}finally{j(!1)}},C=async r=>{j(!0);try{const a=[];for(let x=0;x<r.length;x++){const o=await f(r[x],`assets/layout/banners/${Date.now()}_${x}.jpg`),s=R(o);a.push(s)}const p=[...t.banners,...a],y={...t,banners:p};g(y),N(p),await q(y),b("Banners adicionados com sucesso!")}catch(a){console.error(a),b("Erro ao fazer upload dos banners")}finally{j(!1)}},l=async r=>{j(!0);try{const a=[];for(let x=0;x<r.length;x++){const o=await f(r[x],`assets/layout/promotions/${Date.now()}_${x}.jpg`),s=R(o);a.push(s)}const p=[...t.promotions,...a],y={...t,promotions:p};g(y),w(p),await q(y),b("Promoções adicionadas com sucesso!")}catch(a){console.error(a),b("Erro ao fazer upload das promoções")}finally{j(!1)}},m=async r=>{j(!0);try{const a=[];for(let x=0;x<r.length;x++){const o=await f(r[x],`assets/layout/popups/${Date.now()}_${x}.jpg`),s=R(o);a.push(s)}const p=[...t.popups,...a],y={...t,popups:p};g(y),z(p),await q(y),b("Popups adicionados com sucesso!")}catch(a){console.error(a),b("Erro ao fazer upload dos popups")}finally{j(!1)}},h=async r=>{const a=t.banners.filter((y,x)=>x!==r),p={...t,banners:a};g(p),N(a),await q(p)},U=async r=>{const a=t.promotions.filter((y,x)=>x!==r),p={...t,promotions:a};g(p),w(a),await q(p)},B=async r=>{const a=t.popups.filter((y,x)=>x!==r),p={...t,popups:a};g(p),z(a),await q(p)},q=async r=>{await te(T(L,"config","layout"),r)};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-8",children:[e.jsx("h2",{className:"text-xl font-title font-bold",children:"Gerenciar Layout da Home"}),k&&e.jsx("p",{className:`text-center font-semibold ${k.includes("sucesso")?"text-green-600":"text-red-600"}`,children:k}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Logo Principal"}),v?e.jsxs("div",{className:"relative w-48 h-24 border rounded-lg p-2",children:[e.jsx("img",{src:v,alt:"Logo",className:"w-full h-full object-contain"}),e.jsx("button",{onClick:()=>{const r={...t,logo:""};g(r),S(""),q(r)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:e.jsx(O,{size:16})})]}):e.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-primary w-fit",children:[e.jsx(E,{size:20}),e.jsx("span",{children:"Fazer upload do logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:r=>{const a=r.target.files?.[0];a&&c(a)},className:"hidden",disabled:u})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Banners (Hero)"}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-primary w-fit mb-4",children:[e.jsx(E,{size:20}),e.jsx("span",{children:"Adicionar banners"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:r=>{r.target.files&&C(r.target.files)},className:"hidden",disabled:u})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:_.map((r,a)=>e.jsxs("div",{className:"relative aspect-video border rounded-lg overflow-hidden",children:[e.jsx("img",{src:r,alt:`Banner ${a+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>void h(a),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1",children:e.jsx(O,{size:14})})]},a))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Promoções em Destaque"}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-primary w-fit mb-4",children:[e.jsx(E,{size:20}),e.jsx("span",{children:"Adicionar promoções"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:r=>{r.target.files&&l(r.target.files)},className:"hidden",disabled:u})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:A.map((r,a)=>e.jsxs("div",{className:"relative aspect-square border rounded-lg overflow-hidden",children:[e.jsx("img",{src:r,alt:`Promoção ${a+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>void U(a),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1",children:e.jsx(O,{size:14})})]},a))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Popups"}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-primary w-fit mb-4",children:[e.jsx(E,{size:20}),e.jsx("span",{children:"Adicionar popups"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:r=>{r.target.files&&m(r.target.files)},className:"hidden",disabled:u})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:I.map((r,a)=>e.jsxs("div",{className:"relative aspect-square border rounded-lg overflow-hidden",children:[e.jsx("img",{src:r,alt:`Popup ${a+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>void B(a),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1",children:e.jsx(O,{size:14})})]},a))})]})]})}function Ue(){const[t,g]=n.useState("products"),u=async()=>{await xe(he)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-title font-bold",children:"Painel Admin"}),e.jsx("button",{onClick:u,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg",children:"Sair"})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>g("products"),className:`px-6 py-2 rounded-lg font-semibold transition-all ${t==="products"?"bg-primary text-text-primary":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Produtos"}),e.jsx("button",{onClick:()=>g("categories"),className:`px-6 py-2 rounded-lg font-semibold transition-all ${t==="categories"?"bg-primary text-text-primary":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Categorias"}),e.jsx("button",{onClick:()=>g("layout"),className:`px-6 py-2 rounded-lg font-semibold transition-all ${t==="layout"?"bg-primary text-text-primary":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Layout"})]}),t==="products"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx(je,{}),e.jsx(Ne,{})]}),t==="categories"&&e.jsx(we,{}),t==="layout"&&e.jsx(Ce,{})]})]})}export{Ue as default};
