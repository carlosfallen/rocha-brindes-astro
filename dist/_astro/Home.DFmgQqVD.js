const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/HeroBanner.CRN1FgQp.js","_astro/Providers.CiR80n1m.js","_astro/index.Csrxt8z8.js","_astro/chevron-right.XT0tCFxe.js","_astro/PopularCategories.D7GZLVLl.js","_astro/CategorySidebar.BGIEwV-P.js","_astro/x.1UEnyT-Q.js","_astro/search.CE-vMdkK.js","_astro/ProductGrid.eJkIkkDs.js","_astro/ProductModal.B9TDStXj.js","_astro/plus.CaG_o7H7.js","_astro/CartSidebar.TE0Re6Lv.js","_astro/trash-2.BsikKjyH.js","_astro/Footer.CzP66g4N.js","_astro/phone.yV71U2Sd.js"])))=>i.map(i=>d[i]);
import{g as q,a as G,q as H,l as re,o as M,c as U,d as z,b as Q,j as t,_ as C,P as se}from"./Providers.CiR80n1m.js";import{r as K,g as oe,R as ne,a as w}from"./index.Csrxt8z8.js";import{u as ae,c as Z,o as ie,p as ce,C as le,a as de}from"./chevron-right.XT0tCFxe.js";function X(e=6){return ae({queryKey:["catalog",e],queryFn:async()=>{const[a,s,o]=await Promise.all([q(H(U(z,"produtos"),M("createdAt","desc"),re(e))),q(H(U(z,"categorias"),M("nome"))),G(Q(z,"config","layout"))]),c=a.docs.map(x=>({id:x.id,...x.data()})),r=s.docs.map(x=>({id:x.id,...x.data()})),u=o.exists()?o.data():{},S={logo:u.logo||"",banners:(u.banners||[]).map(x=>({url:x,alt:"Banner Rocha Brindes"})),promotions:u.promotions||[],popups:u.popups||[],whatsapp:u.whatsapp,companyInfo:u.companyInfo};return{products:c,categories:r,layout:S}},staleTime:600*1e3,gcTime:1800*1e3,placeholderData:ue()})}function ue(){if(!(typeof window>"u"))try{const e=localStorage.getItem("catalog-cache");if(e){const a=JSON.parse(e);if(Date.now()-a.timestamp<600*1e3)return a.catalog}}catch{return}}function me(e){if(!(typeof window>"u"))try{localStorage.setItem("catalog-cache",JSON.stringify({catalog:e,timestamp:Date.now()}))}catch{console.warn("Failed to cache catalog")}}const he={},W=e=>{let a;const s=new Set,o=(v,l)=>{const h=typeof v=="function"?v(a):v;if(!Object.is(h,a)){const f=a;a=l??(typeof h!="object"||h===null)?h:Object.assign({},a,h),s.forEach(g=>g(a,f))}},c=()=>a,x={setState:o,getState:c,getInitialState:()=>p,subscribe:v=>(s.add(v),()=>s.delete(v)),destroy:()=>{(he?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},p=a=e(o,c,x);return x},pe=e=>e?W(e):W;var A={exports:{}},L={},O={exports:{}},T={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F;function fe(){if(F)return T;F=1;var e=K();function a(l,h){return l===h&&(l!==0||1/l===1/h)||l!==l&&h!==h}var s=typeof Object.is=="function"?Object.is:a,o=e.useState,c=e.useEffect,r=e.useLayoutEffect,u=e.useDebugValue;function S(l,h){var f=h(),g=o({inst:{value:f,getSnapshot:h}}),i=g[0].inst,n=g[1];return r(function(){i.value=f,i.getSnapshot=h,x(i)&&n({inst:i})},[l,f,h]),c(function(){return x(i)&&n({inst:i}),l(function(){x(i)&&n({inst:i})})},[l]),u(f),f}function x(l){var h=l.getSnapshot;l=l.value;try{var f=h();return!s(l,f)}catch{return!0}}function p(l,h){return h()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:S;return T.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:v,T}var $;function ge(){return $||($=1,O.exports=fe()),O.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J;function xe(){if(J)return L;J=1;var e=K(),a=ge();function s(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var o=typeof Object.is=="function"?Object.is:s,c=a.useSyncExternalStore,r=e.useRef,u=e.useEffect,S=e.useMemo,x=e.useDebugValue;return L.useSyncExternalStoreWithSelector=function(p,v,l,h,f){var g=r(null);if(g.current===null){var i={hasValue:!1,value:null};g.current=i}else i=g.current;g=S(function(){function y(_){if(!d){if(d=!0,j=_,_=h(_),f!==void 0&&i.hasValue){var m=i.value;if(f(m,_))return E=m}return E=_}if(m=E,o(j,_))return m;var b=h(_);return f!==void 0&&f(m,b)?(j=_,m):(j=_,E=b)}var d=!1,j,E,R=l===void 0?null:l;return[function(){return y(v())},R===null?void 0:function(){return y(R())}]},[v,l,h,f]);var n=c(p,g[0],g[1]);return u(function(){i.hasValue=!0,i.value=n},[n]),x(n),n},L}var B;function ve(){return B||(B=1,A.exports=xe()),A.exports}var ye=ve();const be=oe(ye),Y={},{useDebugValue:Se}=ne,{useSyncExternalStoreWithSelector:we}=be;let V=!1;const je=e=>e;function _e(e,a=je,s){(Y?"production":void 0)!=="production"&&s&&!V&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),V=!0);const o=we(e.subscribe,e.getState,e.getServerState||e.getInitialState,a,s);return Se(o),o}const Ee=e=>{(Y?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const a=typeof e=="function"?pe(e):e,s=(o,c)=>_e(a,o,c);return Object.assign(s,a),s},Ne=e=>Ee,Ie={};function Ce(e,a){let s;try{s=e()}catch{return}return{getItem:c=>{var r;const u=x=>x===null?null:JSON.parse(x,void 0),S=(r=s.getItem(c))!=null?r:null;return S instanceof Promise?S.then(u):u(S)},setItem:(c,r)=>s.setItem(c,JSON.stringify(r,void 0)),removeItem:c=>s.removeItem(c)}}const D=e=>a=>{try{const s=e(a);return s instanceof Promise?s:{then(o){return D(o)(s)},catch(o){return this}}}catch(s){return{then(o){return this},catch(o){return D(o)(s)}}}},Re=(e,a)=>(s,o,c)=>{let r={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:n=>n,version:0,merge:(n,y)=>({...y,...n}),...a},u=!1;const S=new Set,x=new Set;let p;try{p=r.getStorage()}catch{}if(!p)return e((...n)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),s(...n)},o,c);const v=D(r.serialize),l=()=>{const n=r.partialize({...o()});let y;const d=v({state:n,version:r.version}).then(j=>p.setItem(r.name,j)).catch(j=>{y=j});if(y)throw y;return d},h=c.setState;c.setState=(n,y)=>{h(n,y),l()};const f=e((...n)=>{s(...n),l()},o,c);let g;const i=()=>{var n;if(!p)return;u=!1,S.forEach(d=>d(o()));const y=((n=r.onRehydrateStorage)==null?void 0:n.call(r,o()))||void 0;return D(p.getItem.bind(p))(r.name).then(d=>{if(d)return r.deserialize(d)}).then(d=>{if(d)if(typeof d.version=="number"&&d.version!==r.version){if(r.migrate)return r.migrate(d.state,d.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return d.state}).then(d=>{var j;return g=r.merge(d,(j=o())!=null?j:f),s(g,!0),l()}).then(()=>{y?.(g,void 0),u=!0,x.forEach(d=>d(g))}).catch(d=>{y?.(void 0,d)})};return c.persist={setOptions:n=>{r={...r,...n},n.getStorage&&(p=n.getStorage())},clearStorage:()=>{p?.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>i(),hasHydrated:()=>u,onHydrate:n=>(S.add(n),()=>{S.delete(n)}),onFinishHydration:n=>(x.add(n),()=>{x.delete(n)})},i(),g||f},Pe=(e,a)=>(s,o,c)=>{let r={storage:Ce(()=>localStorage),partialize:i=>i,version:0,merge:(i,n)=>({...n,...i}),...a},u=!1;const S=new Set,x=new Set;let p=r.storage;if(!p)return e((...i)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),s(...i)},o,c);const v=()=>{const i=r.partialize({...o()});return p.setItem(r.name,{state:i,version:r.version})},l=c.setState;c.setState=(i,n)=>{l(i,n),v()};const h=e((...i)=>{s(...i),v()},o,c);c.getInitialState=()=>h;let f;const g=()=>{var i,n;if(!p)return;u=!1,S.forEach(d=>{var j;return d((j=o())!=null?j:h)});const y=((n=r.onRehydrateStorage)==null?void 0:n.call(r,(i=o())!=null?i:h))||void 0;return D(p.getItem.bind(p))(r.name).then(d=>{if(d)if(typeof d.version=="number"&&d.version!==r.version){if(r.migrate)return[!0,r.migrate(d.state,d.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,d.state];return[!1,void 0]}).then(d=>{var j;const[E,R]=d;if(f=r.merge(R,(j=o())!=null?j:h),s(f,!0),E)return v()}).then(()=>{y?.(f,void 0),f=o(),u=!0,x.forEach(d=>d(f))}).catch(d=>{y?.(void 0,d)})};return c.persist={setOptions:i=>{r={...r,...i},i.storage&&(p=i.storage)},clearStorage:()=>{p?.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>g(),hasHydrated:()=>u,onHydrate:i=>(S.add(i),()=>{S.delete(i)}),onFinishHydration:i=>(x.add(i),()=>{x.delete(i)})},r.skipHydration||g(),f||h},De=(e,a)=>"getStorage"in a||"serialize"in a||"deserialize"in a?((Ie?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Re(e,a)):Pe(e,a),ke=De,ee=Ne()(ke((e,a)=>({items:[],isOpen:!1,count:0,category:"Todos",search:"",add:s=>{const o=a().items,r=o.find(u=>u.id===s.id)?o.map(u=>u.id===s.id?{...u,quantity:u.quantity+1}:u):[...o,{...s,quantity:1}];e({items:r,count:r.reduce((u,S)=>u+S.quantity,0)})},remove:s=>{const o=a().items.filter(c=>c.id!==s);e({items:o,count:o.reduce((c,r)=>c+r.quantity,0)})},updateQuantity:(s,o)=>{const c=a().items.map(r=>r.id===s?{...r,quantity:o}:r);e({items:c,count:c.reduce((r,u)=>r+u.quantity,0)})},clear:()=>e({items:[],count:0}),toggle:()=>e({isOpen:!a().isOpen}),setCategory:s=>e({category:s}),setSearch:s=>e({search:s})}),{name:"cart-storage"}));/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=Z("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=Z("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);function Le(){const{count:e,toggle:a}=ee(),{data:s,isLoading:o}=X(),c=s?.layout.logo,r=c?ie(c,"thumbnail"):"";return t.jsx("header",{className:"sticky top-0 z-40 bg-white shadow-md border-b border-gray-100",children:t.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-20",children:[o||!r?t.jsx("div",{className:"h-10 sm:h-14 md:h-16 w-32 sm:w-48 md:w-64 bg-gray-200 animate-pulse rounded"}):t.jsx("img",{src:r,alt:"Rocha Brindes",className:"h-5 sm:h-7 md:h-9 w-auto object-contain",loading:"eager"}),t.jsxs("button",{onClick:a,className:"relative p-2.5 sm:p-3 bg-primary hover:bg-primary-dark text-white rounded-full transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105","aria-label":"Abrir carrinho",children:[t.jsx(Ae,{size:20,className:"sm:w-6 sm:h-6",strokeWidth:2.5}),e>0&&t.jsx("span",{className:"absolute -top-1.5 -right-1.5 sm:-top-2 sm:-right-2 bg-accent text-dark font-bold text-[10px] sm:text-xs min-w-[20px] sm:min-w-[24px] h-[20px] sm:h-[24px] flex items-center justify-center rounded-full border-2 sm:border-3 border-white shadow-md",children:e})]})]})})})}const Oe=w.lazy(()=>C(()=>import("./HeroBanner.CRN1FgQp.js"),__vite__mapDeps([0,1,2,3]))),Te=w.lazy(()=>C(()=>import("./PopularCategories.D7GZLVLl.js"),__vite__mapDeps([4,1,2,3]))),qe=w.lazy(()=>C(()=>import("./CategorySidebar.BGIEwV-P.js"),__vite__mapDeps([5,1,2,3,6,7]))),He=w.lazy(()=>C(()=>import("./ProductGrid.eJkIkkDs.js"),__vite__mapDeps([8,1,2,3]))),Me=w.lazy(()=>C(()=>import("./ProductModal.B9TDStXj.js"),__vite__mapDeps([9,1,2,3,6,10]))),Ue=w.lazy(()=>C(()=>import("./CartSidebar.TE0Re6Lv.js"),__vite__mapDeps([11,1,2,3,6,10,12]))),We=w.lazy(()=>C(()=>import("./Footer.CzP66g4N.js"),__vite__mapDeps([13,1,2,14,3])));function Fe(){const{data:e,isLoading:a}=X(1e3),{category:s,search:o,add:c,setCategory:r,setSearch:u}=ee(),[S,x]=w.useState(null),[p,v]=w.useState("5589994333316"),[l,h]=w.useState(0),f=6;w.useEffect(()=>{if(e){me(e);const m=[];e.layout.logo&&m.push(e.layout.logo),e.layout.banners[0]?.url&&m.push(e.layout.banners[0].url),ce(m)}},[e]),w.useEffect(()=>{h(0),window.scrollTo({top:0,behavior:"smooth"})},[s,o]);const g=w.useMemo(()=>e?e.products.filter(m=>{const b=s==="Todos"||m.categorias?.includes(s),N=!o||m.nome.toLowerCase().includes(o.toLowerCase())||m.id.toLowerCase().includes(o.toLowerCase());return b&&N}):[],[e,s,o]),i=w.useMemo(()=>{const m=l*f;return g.slice(m,m+f)},[g,l,f]),n=Math.ceil(g.length/f),y=m=>{h(m),window.scrollTo({top:0,behavior:"smooth"})},d=async()=>{try{const m=await G(Q(z,"config","general"));if(m.exists()){const b=m.data();b.whatsappNumber&&v(b.whatsappNumber)}}catch(m){console.error("Erro ao carregar Contato:",m)}};w.useEffect(()=>{d()},[]);const j=()=>{const m=p.replace(/\D/g,""),b=encodeURIComponent("Olá! Gostaria de mais informações sobre os produtos."),N=`https://wa.me/${m}?text=${b}`;/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=N:window.open(N,"_blank")},E=t.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((m,b)=>t.jsx("div",{className:"bg-white rounded-xl h-96 animate-pulse"},b))}),R=()=>{if(n<=1)return null;const m=()=>{const b=[],N=l>2,P=l<n-3;if(n<=7)for(let I=0;I<n;I++)b.push(I);else{b.push(0),N&&b.push("...");const I=Math.max(1,l-1),te=Math.min(n-2,l+1);for(let k=I;k<=te;k++)b.includes(k)||b.push(k);P&&b.push("..."),b.includes(n-1)||b.push(n-1)}return b};return t.jsxs("div",{className:"mt-12 mb-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>y(l-1),disabled:l===0,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-sm",children:[t.jsx(le,{size:18}),t.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),t.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:m().map((b,N)=>{if(b==="...")return t.jsx("span",{className:"px-2 py-2 text-gray-400",children:"..."},`ellipsis-${N}`);const P=b,I=P===l;return t.jsx("button",{onClick:()=>y(P),className:`min-w-[40px] h-[40px] px-3 py-2 rounded-lg font-semibold text-sm transition-all ${I?"bg-primary text-white shadow-md scale-110":"bg-white border-2 border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-primary"}`,children:P+1},P)})}),t.jsxs("button",{onClick:()=>y(l+1),disabled:l>=n-1,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-50 hover:border-primary transition-all font-medium text-sm",children:[t.jsx("span",{className:"hidden sm:inline",children:"Próxima"}),t.jsx(de,{size:18})]})]}),t.jsxs("div",{className:"text-sm text-gray-600 font-medium",children:["Página ",t.jsx("span",{className:"font-bold text-primary",children:l+1})," de"," ",t.jsx("span",{className:"font-bold",children:n}),t.jsxs("span",{className:"hidden sm:inline",children:[" • ",g.length," ",g.length===1?"produto":"produtos"]})]})]})},_=e?.categories.find(m=>m.nome===s);return t.jsxs(t.Fragment,{children:[t.jsx(Le,{}),t.jsx("main",{className:"min-h-screen bg-gray-50 pt-4 md:pt-8",children:t.jsxs("div",{className:"container mx-auto px-4 pb-4",children:[t.jsx(w.Suspense,{fallback:t.jsx("div",{className:"mb-8 h-48 md:h-56 rounded-2xl bg-gray-100 animate-pulse"}),children:t.jsx(Oe,{banners:e?.layout.banners||[]})}),e?.layout.companyInfo&&t.jsx("section",{className:"mb-12 bg-white rounded-2xl shadow-card p-6 md:p-8",children:t.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[t.jsx("h2",{className:"text-2xl md:text-3xl font-title font-bold text-dark mb-4",children:e.layout.companyInfo.title||"Sobre Nós"}),t.jsx("p",{className:"text-gray-700 leading-relaxed text-sm md:text-base",children:e.layout.companyInfo.description})]})}),t.jsx(w.Suspense,{fallback:null,children:t.jsx(Te,{categories:e?.categories.filter(m=>m.popular).slice(0,4)||[],onSelect:r})}),t.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-8",children:[t.jsx(w.Suspense,{fallback:null,children:t.jsx(qe,{categories:e?.categories.map(m=>m.nome)||[],selected:s,onSelect:r,search:o,onSearch:u})}),t.jsxs("div",{children:[_&&(_.descricao||_.videoUrl)&&t.jsxs("div",{className:"mb-8 bg-white rounded-2xl shadow-card overflow-hidden",children:[_.videoUrl&&t.jsx("div",{className:"relative w-full aspect-video bg-gray-900",children:t.jsx("video",{src:_.videoUrl,className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),_.descricao&&t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-xl font-title font-bold text-dark mb-3",children:s}),t.jsx("p",{className:"text-gray-700 leading-relaxed",children:_.descricao})]})]}),a?E:g.length===0?t.jsxs("div",{className:"text-center py-20",children:[t.jsx("p",{className:"text-xl text-gray-500",children:"Nenhum produto encontrado"}),o&&t.jsx("button",{onClick:()=>u(""),className:"mt-4 px-6 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-all",children:"Limpar busca"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-4 flex items-center justify-between",children:t.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",t.jsx("span",{className:"font-semibold",children:l*f+1})," -"," ",t.jsx("span",{className:"font-semibold",children:Math.min((l+1)*f,g.length)})," de"," ",t.jsx("span",{className:"font-semibold",children:g.length})," ",g.length===1?"produto":"produtos"]})}),t.jsx(w.Suspense,{fallback:E,children:t.jsx(He,{products:i,onView:x,onAdd:c})}),R()]})]})]})]})}),t.jsx("button",{onClick:j,className:"fixed bottom-6 right-6 bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-all z-40","aria-label":"Contato WhatsApp",children:t.jsx(ze,{size:28})}),t.jsxs(w.Suspense,{fallback:null,children:[S&&t.jsx(Me,{product:S,onClose:()=>x(null)}),t.jsx(Ue,{}),t.jsx(We,{})]})]})}function Ve(){return t.jsx(se,{children:t.jsx(Fe,{})})}export{Ve as H,Ae as S,ee as u};
