import{c as i,P as q}from"./Providers.DwJZh4qX.js";import{r as w,g as H,R as A}from"./index.Ba-IbuDT.js";import{g as F,d as L,b as T}from"./firebase.BWuIrDj8.js";import{o as U}from"./image.BnuFfM80.js";import{c as $}from"./createLucideIcon.DozWMnKj.js";const W={},I=t=>{let o;const a=new Set,s=(c,b)=>{const h=typeof c=="function"?c(o):c;if(!Object.is(h,o)){const f=o;o=b??(typeof h!="object"||h===null)?h:Object.assign({},o,h),a.forEach(g=>g(o,f))}},r=()=>o,v={setState:s,getState:r,getInitialState:()=>n,subscribe:c=>(a.add(c),()=>a.delete(c)),destroy:()=>{(W?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},n=o=t(s,r,v);return v},J=t=>t?I(t):I;var k={exports:{}},P={},R={exports:{}},z={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S=w;function M(t,o){return t===o&&(t!==0||1/t===1/o)||t!==t&&o!==o}var Q=typeof Object.is=="function"?Object.is:M,B=S.useState,G=S.useEffect,V=S.useLayoutEffect,Z=S.useDebugValue;function K(t,o){var a=o(),s=B({inst:{value:a,getSnapshot:o}}),r=s[0].inst,e=s[1];return V(function(){r.value=a,r.getSnapshot=o,_(r)&&e({inst:r})},[t,a,o]),G(function(){return _(r)&&e({inst:r}),t(function(){_(r)&&e({inst:r})})},[t]),Z(a),a}function _(t){var o=t.getSnapshot;t=t.value;try{var a=o();return!Q(t,a)}catch{return!0}}function X(t,o){return o()}var Y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?X:K;z.useSyncExternalStore=S.useSyncExternalStore!==void 0?S.useSyncExternalStore:Y;R.exports=z;var ee=R.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E=w,te=ee;function re(t,o){return t===o&&(t!==0||1/t===1/o)||t!==t&&o!==o}var ne=typeof Object.is=="function"?Object.is:re,oe=te.useSyncExternalStore,ae=E.useRef,se=E.useEffect,ie=E.useMemo,ce=E.useDebugValue;P.useSyncExternalStoreWithSelector=function(t,o,a,s,r){var e=ae(null);if(e.current===null){var d={hasValue:!1,value:null};e.current=d}else d=e.current;e=ie(function(){function v(f){if(!n){if(n=!0,c=f,f=s(f),r!==void 0&&d.hasValue){var g=d.value;if(r(g,f))return b=g}return b=f}if(g=b,ne(c,f))return g;var m=s(f);return r!==void 0&&r(g,m)?(c=f,g):(c=f,b=m)}var n=!1,c,b,h=a===void 0?null:a;return[function(){return v(o())},h===null?void 0:function(){return v(h())}]},[o,a,s,r]);var p=oe(t,e[0],e[1]);return se(function(){d.hasValue=!0,d.value=p},[p]),ce(p),p};k.exports=P;var le=k.exports;const ue=H(le),D={},{useDebugValue:de}=A,{useSyncExternalStoreWithSelector:me}=ue;let C=!1;const fe=t=>t;function he(t,o=fe,a){(D?"production":void 0)!=="production"&&a&&!C&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),C=!0);const s=me(t.subscribe,t.getState,t.getServerState||t.getInitialState,o,a);return de(s),s}const pe=t=>{(D?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const o=typeof t=="function"?J(t):t,a=(s,r)=>he(o,s,r);return Object.assign(a,o),a},ve=t=>pe,be={};function ge(t,o){let a;try{a=t()}catch{return}return{getItem:r=>{var e;const d=v=>v===null?null:JSON.parse(v,void 0),p=(e=a.getItem(r))!=null?e:null;return p instanceof Promise?p.then(d):d(p)},setItem:(r,e)=>a.setItem(r,JSON.stringify(e,void 0)),removeItem:r=>a.removeItem(r)}}const N=t=>o=>{try{const a=t(o);return a instanceof Promise?a:{then(s){return N(s)(a)},catch(s){return this}}}catch(a){return{then(s){return this},catch(s){return N(s)(a)}}}},ye=(t,o)=>(a,s,r)=>{let e={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:u=>u,version:0,merge:(u,y)=>({...y,...u}),...o},d=!1;const p=new Set,v=new Set;let n;try{n=e.getStorage()}catch{}if(!n)return t((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${e.name}', the given storage is currently unavailable.`),a(...u)},s,r);const c=N(e.serialize),b=()=>{const u=e.partialize({...s()});let y;const l=c({state:u,version:e.version}).then(x=>n.setItem(e.name,x)).catch(x=>{y=x});if(y)throw y;return l},h=r.setState;r.setState=(u,y)=>{h(u,y),b()};const f=t((...u)=>{a(...u),b()},s,r);let g;const m=()=>{var u;if(!n)return;d=!1,p.forEach(l=>l(s()));const y=((u=e.onRehydrateStorage)==null?void 0:u.call(e,s()))||void 0;return N(n.getItem.bind(n))(e.name).then(l=>{if(l)return e.deserialize(l)}).then(l=>{if(l)if(typeof l.version=="number"&&l.version!==e.version){if(e.migrate)return e.migrate(l.state,l.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return l.state}).then(l=>{var x;return g=e.merge(l,(x=s())!=null?x:f),a(g,!0),b()}).then(()=>{y?.(g,void 0),d=!0,v.forEach(l=>l(g))}).catch(l=>{y?.(void 0,l)})};return r.persist={setOptions:u=>{e={...e,...u},u.getStorage&&(n=u.getStorage())},clearStorage:()=>{n?.removeItem(e.name)},getOptions:()=>e,rehydrate:()=>m(),hasHydrated:()=>d,onHydrate:u=>(p.add(u),()=>{p.delete(u)}),onFinishHydration:u=>(v.add(u),()=>{v.delete(u)})},m(),g||f},xe=(t,o)=>(a,s,r)=>{let e={storage:ge(()=>localStorage),partialize:m=>m,version:0,merge:(m,u)=>({...u,...m}),...o},d=!1;const p=new Set,v=new Set;let n=e.storage;if(!n)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${e.name}', the given storage is currently unavailable.`),a(...m)},s,r);const c=()=>{const m=e.partialize({...s()});return n.setItem(e.name,{state:m,version:e.version})},b=r.setState;r.setState=(m,u)=>{b(m,u),c()};const h=t((...m)=>{a(...m),c()},s,r);r.getInitialState=()=>h;let f;const g=()=>{var m,u;if(!n)return;d=!1,p.forEach(l=>{var x;return l((x=s())!=null?x:h)});const y=((u=e.onRehydrateStorage)==null?void 0:u.call(e,(m=s())!=null?m:h))||void 0;return N(n.getItem.bind(n))(e.name).then(l=>{if(l)if(typeof l.version=="number"&&l.version!==e.version){if(e.migrate)return[!0,e.migrate(l.state,l.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,l.state];return[!1,void 0]}).then(l=>{var x;const[j,O]=l;if(f=e.merge(O,(x=s())!=null?x:h),a(f,!0),j)return c()}).then(()=>{y?.(f,void 0),f=s(),d=!0,v.forEach(l=>l(f))}).catch(l=>{y?.(void 0,l)})};return r.persist={setOptions:m=>{e={...e,...m},m.storage&&(n=m.storage)},clearStorage:()=>{n?.removeItem(e.name)},getOptions:()=>e,rehydrate:()=>g(),hasHydrated:()=>d,onHydrate:m=>(p.add(m),()=>{p.delete(m)}),onFinishHydration:m=>(v.add(m),()=>{v.delete(m)})},e.skipHydration||g(),f||h},Se=(t,o)=>"getStorage"in o||"serialize"in o||"deserialize"in o?((be?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),ye(t,o)):xe(t,o),we=Se,Ne=ve()(we((t,o)=>({items:[],isOpen:!1,count:0,category:"Todos",search:"",add:a=>{const s=o().items,e=s.find(d=>d.id===a.id)?s.map(d=>d.id===a.id?{...d,quantity:d.quantity+1}:d):[...s,{...a,quantity:1}];t({items:e,count:e.reduce((d,p)=>d+p.quantity,0)})},remove:a=>{const s=o().items.filter(r=>r.id!==a);t({items:s,count:s.reduce((r,e)=>r+e.quantity,0)})},updateQuantity:(a,s)=>{const r=o().items.map(e=>e.id===a?{...e,quantity:s}:e);t({items:r,count:r.reduce((e,d)=>e+d.quantity,0)})},clear:()=>t({items:[],count:0}),toggle:()=>t({isOpen:!o().isOpen}),setCategory:a=>t({category:a}),setSearch:a=>t({search:a})}),{name:"cart-storage"}));/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=$("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=$("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function Ie(){const{items:t,clear:o}=Ne(),[a,s]=w.useState("5562992485958"),[r,e]=w.useState({name:"",doc:"",address:"",cep:"",obs:""});w.useEffect(()=>{d()},[]);const d=async()=>{try{const n=await F(L(T,"config","general"));if(n.exists()){const c=n.data();c.whatsappNumber&&s(c.whatsappNumber)}}catch(n){console.error("Erro ao carregar contato:",n)}};if(t.length===0)return i("div",{className:"container mx-auto px-4 py-16 text-center",children:[i("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Seu carrinho está vazio"}),i("a",{href:"/produtos",className:"text-primary hover:underline",children:"Voltar para produtos"})]});const p=n=>{n.preventDefault();let c=`*Orçamento - 88 Brindes*

`;c+=`*Cliente:* ${r.name}
`,c+=`*Contato:* ${r.doc}
`,c+=`*Endereço:* ${r.address}
`,c+=`*CEP:* ${r.cep}

`,c+=`*Produtos:*
`,t.forEach(f=>{c+=`• ${f.nome} (Cód: ${f.id})`,f.cor&&(c+=` - Cor: ${f.cor}`),c+=` - Qtd: ${f.quantity}
`}),r.obs&&(c+=`
*Observações:* ${r.obs}`);const h=`https://wa.me/${a.replace(/\D/g,"")}?text=${encodeURIComponent(c.trim())}`;/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=h:window.open(h,"_blank"),o(),window.location.href="/obrigado"},v=t.reduce((n,c)=>n+c.quantity,0);return i("div",{className:"container mx-auto px-4 py-8",children:[i("a",{href:"/carrinho",className:"inline-flex items-center gap-2 text-gray-600 hover:text-primary mb-8 transition-colors",children:[i(Ee,{size:18}),"Voltar ao carrinho"]}),i("h1",{className:"text-3xl md:text-4xl font-title font-bold text-dark mb-8",children:"Finalizar Orçamento"}),i("div",{className:"grid lg:grid-cols-3 gap-8",children:[i("div",{className:"lg:col-span-2",children:i("form",{onSubmit:p,className:"bg-white rounded-xl shadow-card p-6 space-y-4",children:[i("div",{children:[i("label",{className:"block text-sm font-semibold mb-2",children:"Nome completo *"}),i("input",{type:"text",value:r.name,onChange:n=>e({...r,name:n.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none",required:!0})]}),i("div",{children:[i("label",{className:"block text-sm font-semibold mb-2",children:"CPF/CNPJ *"}),i("input",{type:"text",value:r.doc,onChange:n=>e({...r,doc:n.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none",required:!0})]}),i("div",{children:[i("label",{className:"block text-sm font-semibold mb-2",children:"Endereço completo *"}),i("input",{type:"text",value:r.address,onChange:n=>e({...r,address:n.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none",required:!0})]}),i("div",{children:[i("label",{className:"block text-sm font-semibold mb-2",children:"CEP *"}),i("input",{type:"text",value:r.cep,onChange:n=>e({...r,cep:n.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none",required:!0})]}),i("div",{children:[i("label",{className:"block text-sm font-semibold mb-2",children:"Observações (opcional)"}),i("textarea",{value:r.obs,onChange:n=>e({...r,obs:n.target.value}),rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none resize-none"})]}),i("button",{type:"submit",className:"w-full bg-gradient-to-r from-primary to-primary-dark text-white font-bold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2",children:[i(_e,{size:20}),"Enviar para WhatsApp"]})]})}),i("div",{className:"lg:col-span-1",children:i("div",{className:"bg-white rounded-xl shadow-card p-6 sticky top-24",children:[i("h2",{className:"text-xl font-title font-bold text-dark mb-6",children:"Resumo do Pedido"}),i("div",{className:"space-y-4 mb-6 max-h-96 overflow-y-auto",children:t.map(n=>{let c=n.thumb_url||n.imagem_url;if(n.cor&&n.variacoes?.length){const h=n.variacoes.find(f=>f.cor===n.cor);h&&(c=h.thumb_url||h.imagem_url||c)}const b=c?U(c,"thumbnail"):"";return i("div",{className:"flex gap-3 pb-4 border-b border-gray-200",children:[b?i("img",{src:b,alt:n.nome,className:"w-16 h-16 object-contain rounded-lg bg-gray-50"}):i("div",{className:"w-16 h-16 flex items-center justify-center bg-gray-100 rounded-lg",children:i("span",{className:"text-xs text-gray-400",children:"Sem img"})}),i("div",{className:"flex-1 min-w-0",children:[i("h3",{className:"font-semibold text-sm line-clamp-2 mb-1",children:n.nome}),n.cor&&i("p",{className:"text-xs text-gray-500 mb-1",children:["Cor: ",n.cor]}),i("p",{className:"text-xs text-gray-500",children:["Qtd: ",n.quantity]})]})]},`${n.id}-${n.cor||"default"}`)})}),i("div",{className:"space-y-3 pt-4 border-t border-gray-200",children:i("div",{className:"flex justify-between text-gray-600",children:[i("span",{children:"Total de itens:"}),i("span",{className:"font-bold text-dark",children:v})]})})]})})]})]})}function ze(){return i(q,{children:i(Ie,{})})}export{ze as default};
