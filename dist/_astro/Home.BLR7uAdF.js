const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/HeroBanner.CSdM9IG1.js","_astro/Providers.Bn6N5NNK.js","_astro/index.Ba-IbuDT.js","_astro/Image.DsorNoV2.js","_astro/createLucideIcon.CWG7bwo-.js","_astro/chevron-right.DdIaT1Ni.js","_astro/PopularCategories.C5xmrVCT.js","_astro/CategorySidebar.DWWn5MNY.js","_astro/ProductGrid.DPDiI3P-.js","_astro/ProductModal.DN_6yEcm.js","_astro/x.BescSzEA.js","_astro/CartSidebar.D6md0D_X.js","_astro/trash-2.uf3-JoHh.js"])))=>i.map(i=>d[i]);
import{g as R,a as B,q as z,l as M,o as N,c as P,d as I,b as W,j as l,_ as E,P as V}from"./Providers.Bn6N5NNK.js";import{r as b,g as G,R as K}from"./index.Ba-IbuDT.js";import{u as Q,c as X,o as D,p as Y,a as Z}from"./createLucideIcon.CWG7bwo-.js";function H(e=100){return Q({queryKey:["catalog",e],queryFn:async()=>{const[r,o,n]=await Promise.all([R(z(P(I,"produtos"),N("createdAt","desc"),M(e))),R(z(P(I,"categorias"),N("nome"))),B(W(I,"config","layout"))]),a=r.docs.map(d=>({id:d.id,...d.data()})),t=o.docs.map(d=>({id:d.id,...d.data()})),s=n.exists()?n.data():{},h={logo:s.logo||"",banners:(s.banners||[]).map(d=>({url:d,alt:"Banner Rocha Brindes"})),promotions:s.promotions||[],popups:s.popups||[]};return{products:a,categories:t,layout:h}},staleTime:10*60*1e3,gcTime:30*60*1e3,placeholderData:ee()})}function ee(){try{const e=localStorage.getItem("catalog-cache");if(e){const r=JSON.parse(e);if(Date.now()-r.timestamp<10*60*1e3)return r.catalog}}catch{return}}function te(e){try{localStorage.setItem("catalog-cache",JSON.stringify({catalog:e,timestamp:Date.now()}))}catch{console.warn("Failed to cache catalog")}}const re={},O=e=>{let r;const o=new Set,n=(p,f)=>{const v=typeof p=="function"?p(r):p;if(!Object.is(v,r)){const g=r;r=f??(typeof v!="object"||v===null)?v:Object.assign({},r,v),o.forEach(y=>y(r,g))}},a=()=>r,d={setState:n,getState:a,getInitialState:()=>m,subscribe:p=>(o.add(p),()=>o.delete(p)),destroy:()=>{(re?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},m=r=e(n,a,d);return d},oe=e=>e?O(e):O;var L={exports:{}},T={},$={exports:{}},A={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _=b;function ne(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var ae=typeof Object.is=="function"?Object.is:ne,se=_.useState,ie=_.useEffect,ce=_.useLayoutEffect,le=_.useDebugValue;function ue(e,r){var o=r(),n=se({inst:{value:o,getSnapshot:r}}),a=n[0].inst,t=n[1];return ce(function(){a.value=o,a.getSnapshot=r,C(a)&&t({inst:a})},[e,o,r]),ie(function(){return C(a)&&t({inst:a}),e(function(){C(a)&&t({inst:a})})},[e]),le(o),o}function C(e){var r=e.getSnapshot;e=e.value;try{var o=r();return!ae(e,o)}catch{return!0}}function de(e,r){return r()}var me=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?de:ue;A.useSyncExternalStore=_.useSyncExternalStore!==void 0?_.useSyncExternalStore:me;$.exports=A;var fe=$.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j=b,he=fe;function ge(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var pe=typeof Object.is=="function"?Object.is:ge,ve=he.useSyncExternalStore,ye=j.useRef,Se=j.useEffect,be=j.useMemo,xe=j.useDebugValue;T.useSyncExternalStoreWithSelector=function(e,r,o,n,a){var t=ye(null);if(t.current===null){var s={hasValue:!1,value:null};t.current=s}else s=t.current;t=be(function(){function d(g){if(!m){if(m=!0,p=g,g=n(g),a!==void 0&&s.hasValue){var y=s.value;if(a(y,g))return f=y}return f=g}if(y=f,pe(p,g))return y;var u=n(g);return a!==void 0&&a(y,u)?(p=g,y):(p=g,f=u)}var m=!1,p,f,v=o===void 0?null:o;return[function(){return d(r())},v===null?void 0:function(){return d(v())}]},[r,o,n,a]);var h=ve(e,t[0],t[1]);return Se(function(){s.hasValue=!0,s.value=h},[h]),xe(h),h};L.exports=T;var _e=L.exports;const Ee=G(_e),F={},{useDebugValue:we}=K,{useSyncExternalStoreWithSelector:je}=Ee;let k=!1;const Ie=e=>e;function Ce(e,r=Ie,o){(F?"production":void 0)!=="production"&&o&&!k&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),k=!0);const n=je(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,o);return we(n),n}const De=e=>{(F?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const r=typeof e=="function"?oe(e):e,o=(n,a)=>Ce(r,n,a);return Object.assign(o,r),o},Re=e=>De,ze={};function Ne(e,r){let o;try{o=e()}catch{return}return{getItem:a=>{var t;const s=d=>d===null?null:JSON.parse(d,void 0),h=(t=o.getItem(a))!=null?t:null;return h instanceof Promise?h.then(s):s(h)},setItem:(a,t)=>o.setItem(a,JSON.stringify(t,void 0)),removeItem:a=>o.removeItem(a)}}const w=e=>r=>{try{const o=e(r);return o instanceof Promise?o:{then(n){return w(n)(o)},catch(n){return this}}}catch(o){return{then(n){return this},catch(n){return w(n)(o)}}}},Pe=(e,r)=>(o,n,a)=>{let t={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:c=>c,version:0,merge:(c,S)=>({...S,...c}),...r},s=!1;const h=new Set,d=new Set;let m;try{m=t.getStorage()}catch{}if(!m)return e((...c)=>{console.warn(`[zustand persist middleware] Unable to update item '${t.name}', the given storage is currently unavailable.`),o(...c)},n,a);const p=w(t.serialize),f=()=>{const c=t.partialize({...n()});let S;const i=p({state:c,version:t.version}).then(x=>m.setItem(t.name,x)).catch(x=>{S=x});if(S)throw S;return i},v=a.setState;a.setState=(c,S)=>{v(c,S),f()};const g=e((...c)=>{o(...c),f()},n,a);let y;const u=()=>{var c;if(!m)return;s=!1,h.forEach(i=>i(n()));const S=((c=t.onRehydrateStorage)==null?void 0:c.call(t,n()))||void 0;return w(m.getItem.bind(m))(t.name).then(i=>{if(i)return t.deserialize(i)}).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==t.version){if(t.migrate)return t.migrate(i.state,i.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return i.state}).then(i=>{var x;return y=t.merge(i,(x=n())!=null?x:g),o(y,!0),f()}).then(()=>{S?.(y,void 0),s=!0,d.forEach(i=>i(y))}).catch(i=>{S?.(void 0,i)})};return a.persist={setOptions:c=>{t={...t,...c},c.getStorage&&(m=c.getStorage())},clearStorage:()=>{m?.removeItem(t.name)},getOptions:()=>t,rehydrate:()=>u(),hasHydrated:()=>s,onHydrate:c=>(h.add(c),()=>{h.delete(c)}),onFinishHydration:c=>(d.add(c),()=>{d.delete(c)})},u(),y||g},Oe=(e,r)=>(o,n,a)=>{let t={storage:Ne(()=>localStorage),partialize:u=>u,version:0,merge:(u,c)=>({...c,...u}),...r},s=!1;const h=new Set,d=new Set;let m=t.storage;if(!m)return e((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${t.name}', the given storage is currently unavailable.`),o(...u)},n,a);const p=()=>{const u=t.partialize({...n()});return m.setItem(t.name,{state:u,version:t.version})},f=a.setState;a.setState=(u,c)=>{f(u,c),p()};const v=e((...u)=>{o(...u),p()},n,a);a.getInitialState=()=>v;let g;const y=()=>{var u,c;if(!m)return;s=!1,h.forEach(i=>{var x;return i((x=n())!=null?x:v)});const S=((c=t.onRehydrateStorage)==null?void 0:c.call(t,(u=n())!=null?u:v))||void 0;return w(m.getItem.bind(m))(t.name).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==t.version){if(t.migrate)return[!0,t.migrate(i.state,i.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,i.state];return[!1,void 0]}).then(i=>{var x;const[J,U]=i;if(g=t.merge(U,(x=n())!=null?x:v),o(g,!0),J)return p()}).then(()=>{S?.(g,void 0),g=n(),s=!0,d.forEach(i=>i(g))}).catch(i=>{S?.(void 0,i)})};return a.persist={setOptions:u=>{t={...t,...u},u.storage&&(m=u.storage)},clearStorage:()=>{m?.removeItem(t.name)},getOptions:()=>t,rehydrate:()=>y(),hasHydrated:()=>s,onHydrate:u=>(h.add(u),()=>{h.delete(u)}),onFinishHydration:u=>(d.add(u),()=>{d.delete(u)})},t.skipHydration||y(),g||v},ke=(e,r)=>"getStorage"in r||"serialize"in r||"deserialize"in r?((ze?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Pe(e,r)):Oe(e,r),He=ke,q=Re()(He((e,r)=>({items:[],isOpen:!1,count:0,category:"Todos",search:"",add:o=>{const n=r().items,t=n.find(s=>s.id===o.id)?n.map(s=>s.id===o.id?{...s,quantity:s.quantity+1}:s):[...n,{...o,quantity:1}];e({items:t,count:t.reduce((s,h)=>s+h.quantity,0)})},remove:o=>{const n=r().items.filter(a=>a.id!==o);e({items:n,count:n.reduce((a,t)=>a+t.quantity,0)})},clear:()=>e({items:[],count:0}),toggle:()=>e({isOpen:!r().isOpen}),setCategory:o=>e({category:o}),setSearch:o=>e({search:o})}),{name:"cart-storage"}));/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=X("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);function Te(){const{count:e,toggle:r}=q(),{data:o}=H(),n=o?.layout.logo||"/assets/images/logo-rocha-brindes.png",a=D(n,{width:257,height:64,quality:90});return b.useEffect(()=>{a&&Y(a,"high")},[a]),l.jsx("header",{className:"sticky top-0 z-40 bg-white shadow-md border-b border-gray-100",children:l.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex items-center justify-between h-20",children:[l.jsx("img",{src:a,alt:"Rocha Brindes - Catálogo de produtos personalizados",width:257,height:64,className:"h-14 md:h-16 w-auto object-contain",fetchPriority:"high",decoding:"async"}),l.jsxs("button",{onClick:r,className:"relative p-3 bg-primary hover:bg-primary-dark text-white rounded-full transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105","aria-label":"Abrir carrinho de orçamento",children:[l.jsx(Le,{size:24,strokeWidth:2.5}),e>0&&l.jsx("span",{className:"absolute -top-2 -right-2 bg-accent text-dark font-bold text-xs min-w-[24px] h-[24px] flex items-center justify-center rounded-full border-3 border-white shadow-md animate-pulse","aria-label":`${e} ${e===1?"item":"itens"} no carrinho`,children:e})]})]})})})}const $e=b.lazy(()=>E(()=>import("./HeroBanner.CSdM9IG1.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ae=b.lazy(()=>E(()=>import("./PopularCategories.C5xmrVCT.js"),__vite__mapDeps([6,1,2,3,4]))),Fe=b.lazy(()=>E(()=>import("./CategorySidebar.DWWn5MNY.js"),__vite__mapDeps([7,1,2,4]))),qe=b.lazy(()=>E(()=>import("./ProductGrid.DPDiI3P-.js"),__vite__mapDeps([8,1,2,3,4]))),Je=b.lazy(()=>E(()=>import("./ProductModal.DN_6yEcm.js"),__vite__mapDeps([9,1,2,3,4,10]))),Ue=b.lazy(()=>E(()=>import("./CartSidebar.D6md0D_X.js"),__vite__mapDeps([11,1,2,3,4,10,12])));function Be(){const{data:e,isLoading:r}=H(),{category:o,search:n,add:a,setCategory:t,setSearch:s}=q(),[h,d]=b.useState(null);b.useEffect(()=>{if(e){te(e);const f=[];e.layout.logo&&f.push(D(e.layout.logo,{width:257,height:64,quality:90})),e.layout.banners[0]?.url&&f.push(D(e.layout.banners[0].url,{width:1248,height:390,quality:85})),Z(f)}},[e]);const m=b.useMemo(()=>e?e.products.filter(f=>{const v=o==="Todos"||f.categorias?.includes(o),g=!n||f.nome.toLowerCase().includes(n.toLowerCase())||f.id.toLowerCase().includes(n.toLowerCase());return v&&g}):[],[e,o,n]),p=l.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(9)].map((f,v)=>l.jsx("div",{className:"bg-white rounded-xl h-96 animate-pulse"},v))});return l.jsxs(l.Fragment,{children:[l.jsx(Te,{}),l.jsx("main",{className:"min-h-screen bg-gray-50",children:l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsx(b.Suspense,{fallback:l.jsx("div",{className:"mb-8 h-40 md:h-56 rounded-2xl bg-gray-100 animate-pulse"}),children:l.jsx($e,{banners:e?.layout.banners||[]})}),l.jsx(b.Suspense,{fallback:null,children:l.jsx(Ae,{categories:e?.categories.filter(f=>f.popular).slice(0,4)||[],onSelect:t})}),l.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-8",children:[l.jsx(b.Suspense,{fallback:null,children:l.jsx(Fe,{categories:e?.categories.map(f=>f.nome)||[],selected:o,onSelect:t,search:n,onSearch:s})}),l.jsx("div",{children:r?p:m.length===0?l.jsx("div",{className:"text-center py-20",children:l.jsx("p",{className:"text-xl text-gray-500",children:"Nenhum produto encontrado"})}):l.jsx(b.Suspense,{fallback:p,children:l.jsx(qe,{products:m,onView:d,onAdd:a})})})]})]})}),l.jsxs(b.Suspense,{fallback:null,children:[h&&l.jsx(Je,{product:h,onClose:()=>d(null)}),l.jsx(Ue,{})]})]})}function Ge(){return l.jsx(V,{children:l.jsx(Be,{})})}export{Ge as H,Le as S,q as u};
