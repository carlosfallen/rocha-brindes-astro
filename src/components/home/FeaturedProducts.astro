---
import { getCatalog } from "../../core/services/catalog"
import { optimizeUrl } from "../../shared/utils/image"

const data = await getCatalog(6) // buscar 6 produtos em destaque
const products = data.products
---

<section class="container mx-auto px-4 py-12">
  <h2 class="text-2xl font-bold mb-6 text-gray-900">
    Produtos em Destaque
  </h2>

  {products.length === 0 && (
    <p class="text-gray-500">Nenhum produto encontrado.</p>
  )}

  <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
    {products.map((product) => (
      <a href={`/produto/${product.id}`} class="group block">
        <div class="w-full aspect-square bg-gray-100 rounded-lg overflow-hidden shadow-sm">
          <img
            src={optimizeUrl(product.imagem_url, "public")}
            alt={product.nome}
            class="w-full h-full object-cover group-hover:scale-105 transition-transform"
            loading="lazy"
          />
        </div>
        <h3 class="mt-2 font-semibold text-gray-800 group-hover:text-orange-500">
          {product.nome}
        </h3>
      </a>
    ))}
  </div>
</section>
